<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Eric Chang&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="~爱前端，爱生活~">
<meta property="og:type" content="website">
<meta property="og:title" content="Eric Chang's Blog">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Eric Chang's Blog">
<meta property="og:description" content="~爱前端，爱生活~">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eric Chang's Blog">
<meta name="twitter:description" content="~爱前端，爱生活~">
  
    <link rel="alternative" href="/atom.xml" title="Eric Chang&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">


	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/images/me.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/" style="font-family: Microsoft Yahei;">Eric Chang</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/tags/feeling">感悟</a></li>
				        
							<li><a href="/tags/me">关于</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/changsiyuan" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/2803286360" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="mailto:changsiyuan2011@126.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="http://www.linkedin.com/profile/preview?locale=zh_CN&trk=prof-0-sb-preview-primary-button" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Angularjs/" style="font-size: 11.25px;">Angularjs</a> <a href="/tags/Flask/" style="font-size: 10px;">Flask</a> <a href="/tags/JSONP/" style="font-size: 10px;">JSONP</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 18.75px;">JavaScript</a> <a href="/tags/Latex/" style="font-size: 10px;">Latex</a> <a href="/tags/Linkedlist/" style="font-size: 11.25px;">Linkedlist</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Operating-System/" style="font-size: 10px;">Operating System</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/Safety/" style="font-size: 10px;">Safety</a> <a href="/tags/Tree/" style="font-size: 11.25px;">Tree</a> <a href="/tags/Web/" style="font-size: 17.5px;">Web</a> <a href="/tags/books/" style="font-size: 11.25px;">books</a> <a href="/tags/computer/" style="font-size: 11.25px;">computer</a> <a href="/tags/cooking/" style="font-size: 11.25px;">cooking</a> <a href="/tags/css/" style="font-size: 12.5px;">css</a> <a href="/tags/datebase/" style="font-size: 13.75px;">datebase</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/feeling/" style="font-size: 17.5px;">feeling</a> <a href="/tags/git/" style="font-size: 11.25px;">git</a> <a href="/tags/glassfish/" style="font-size: 10px;">glassfish</a> <a href="/tags/hadoop/" style="font-size: 16.25px;">hadoop</a> <a href="/tags/hardware/" style="font-size: 10px;">hardware</a> <a href="/tags/hdfs/" style="font-size: 10px;">hdfs</a> <a href="/tags/html/" style="font-size: 11.25px;">html</a> <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/jQuery/" style="font-size: 12.5px;">jQuery</a> <a href="/tags/javaEE/" style="font-size: 10px;">javaEE</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/mail/" style="font-size: 10px;">mail</a> <a href="/tags/mapreduce/" style="font-size: 13.75px;">mapreduce</a> <a href="/tags/me/" style="font-size: 10px;">me</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/node-js/" style="font-size: 10px;">node.js</a> <a href="/tags/others/" style="font-size: 11.25px;">others</a> <a href="/tags/psychology/" style="font-size: 11.25px;">psychology</a> <a href="/tags/publicity/" style="font-size: 10px;">publicity</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/translation/" style="font-size: 11.25px;">translation</a> <a href="/tags/travel/" style="font-size: 11.25px;">travel</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.yinshuisiyuan.net/">我的主页</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.ruanyifeng.com/home.html">阮一峰</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">Github</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://azure.microsoft.com/en-us/?v=17.14">Azure</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000">Python</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/001434501245426ad4b91f2b880464ba876a8e3043fc8ef000">Nodejs</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我叫常思源，毕业于北京邮电大学，目前就职于斯伦贝谢技术有限公司。专注DevOps和持续交付。快速学习，注重细节，追求卓越！</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Eric Chang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/images/me.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Eric Chang</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/tags/feeling">感悟</a></li>
		        
					<li><a href="/tags/me">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/changsiyuan" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/2803286360" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="mailto:changsiyuan2011@126.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="http://www.linkedin.com/profile/preview?locale=zh_CN&trk=prof-0-sb-preview-primary-button" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-2015-12-6-DOCTYPE" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/06/2015-12-6-DOCTYPE/" class="article-date">
  	<time datetime="2015-12-05T16:00:00.000Z" itemprop="datePublished">2015-12-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/06/2015-12-6-DOCTYPE/">DOCTYPE 标签详解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>DOCTYPE标签存在于html文档头部，我以前没有注意他，因为大多数情况下，我编写的都是html5文档，区区一行<code>&lt;!DOCTYPE html&gt;</code>确实没有引起我的重视；</li>
<li>DOCTYPE标签规定了文档类型、文档模式等等，对于浏览器正确解析html文档具有重要作用；</li>
<li>本文分析了DOCTYPE标签的作用和常见形式；</li>
</ul>
<h3 id="文档类型">文档类型</h3><ul>
<li>XML、HTML、XHTML、HTML5的关系如下：<ul>
<li>SGML（标准通用标记语言）是一个标准，告诉我们怎么去指定文档标记，他是只描述文档标记应该是怎么样的元语言；</li>
<li>HTML是被用SGML描述的标记语言；</li>
<li>HTML不够灵活，因此W3C开发了XML，XML用于对信息进行自我描述，XML支持自定义标签；</li>
<li>XHTML是在HTML和XML之间的一种语言，是为了适应XML而重新改造的HTML；</li>
<li>XHTML比HTML更加严格；</li>
<li>HTML5不是基于SGML的，所以不需要引用 DTD；</li>
<li>HTML5是最新的HTML标准，他的主要目标是提供所有内容而不需要任何的像flash，silverlight等的额外插件，这些内容来自动画，视频，富GUI等；</li>
<li>DHTML是指Dynamic HTML，动态的HTML，DHTML意味着HTML、CSS和 JavaScript的组合；</li>
</ul>
</li>
<li>为什么说XHTML比HTML更加严格：<ul>
<li>在HTML中标签可以不严格嵌套、有时可省略结束标签、标签的大小写不作区分、属性值有时可以不加引号，这些在XHTML中均不允许；</li>
</ul>
</li>
<li>几者的关系可用下图表示：</li>
</ul>
<p><img src="/images/html-doctype.png" alt="html-doctype"></p>
<h3 id="DOCTYPE标签的作用">DOCTYPE标签的作用</h3><ul>
<li>作用一：告诉浏览器这个文档是HTML、HTML5还是XHTML，即区分文档定义类型（DTD）；</li>
<li>作用二：告诉浏览器这个文档是过渡的(Transitional,要求非常宽松的DTD)还是严格的(Strict,要求严格的DTD)还是框架的(Frameset,专门针对框架页面设计使用的DTD)；</li>
<li>需要注意：<ul>
<li>如果浏览器不能识别一个形式错误的doctype，就会强制进入Quirks模式；</li>
<li>&lt;!DOCTYPE&gt;声明位于文档中的最前面的位置，处于<html>标签之前；</html></li>
<li>&lt;!DOCTYPE&gt;没有结束标签；</li>
<li>&lt;!DOCTYPE&gt; 声明对大小写不敏感；</li>
</ul>
</li>
</ul>
<h3 id="DOCTYPE基本语法">DOCTYPE基本语法</h3><ul>
<li>语法如下：</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">HTML</span> 顶级元素 可用性 <span class="string">"注册//组织//类型 标签//定义 语言"</span><span class="string">"URL"</span>；</span><br></pre></td></tr></table></figure>
<ul>
<li>选项说明：<ul>
<li>顶级元素：指定DTD中声明的顶级元素类型，这与声明的SGML文档类型相对应。</li>
<li>可用性：指定正式公开标识符(FPI)是可公开访问的对象还是系统资源。 PUBLIC为默认值，表示可公开访问的对象。  SYSTEM指系统资源，如本地文件或URL。</li>
<li>注册：指定组织是否由国际标准化组织(ISO)注册。 + 为默认值，表示组织名称已注册。 - 表示组织名称未注册。</li>
<li>组织：指定表明负责由 !DOCTYPE 声明引用的DTD的创建和维护的团体或组织的名称，即 OwnderID。</li>
<li>类型：指定公开文本类，即所引用的对象类型。 DTD为默认值。</li>
<li>标签：指定公开文本描述，即对所引用的公开文本的唯一描述性名称。后面可附带版本号。 HTML为默认值。</li>
<li>定义：指定文档类型定义。 Frameset为框架集文档。，Strict排除所有W3C专家希望逐步淘汰的代表性属性和元素，因为样式表已经很完善了，Transitional包含除frameSet元素的全部内容。</li>
<li>语言：指定公开文本语言，即用于创建所引用对象的自然语言编码系统。该语言定义已编写为 ISO 639 语言代码(大写两个字母)。 EN为默认值，表示英语。</li>
<li>URL：指定所引用对象的位置。</li>
</ul>
</li>
</ul>
<h3 id="不同模式的例子">不同模式的例子</h3><ul>
<li>过渡的(Transitional):要求非常宽松的DTD(一般推荐使用这种)</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>严格的(Strict):要求严格的DTD</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>框架的(Frameset):专门针对框架页面设计使用的DTD</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="常用的DOCTYPE声明">常用的DOCTYPE声明</h3><ul>
<li>HTML5</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>HTML 4.01 Strict</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>HTML 4.01 Transitional</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"</span><br><span class="line">"http://www.w3.org/TR/html4/loose.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>HTML 4.01 Frameset</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN"</span><br><span class="line">"http://www.w3.org/TR/html4/frameset.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>XHTML 1.0 Strict </li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"</span><br><span class="line">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>XHTML 1.0 Transitional </li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "</span><br><span class="line">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>XHTML 1.0 Frameset </li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN"</span><br><span class="line">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>XHTML 1.1</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/">Web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2015-12-5-css-position" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/05/2015-12-5-css-position/" class="article-date">
  	<time datetime="2015-12-04T16:00:00.000Z" itemprop="datePublished">2015-12-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/05/2015-12-5-css-position/">css元素位置相关属性解析</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="元素浮动">元素浮动</h3><ul>
<li>clear属性<ul>
<li>语法：clear : none|left|right|both</li>
<li>none : 允许两边都可以有浮动对象</li>
<li>both : 不允许有浮动对象</li>
<li>left : 不允许左边有浮动对象</li>
<li>right : 不允许右边有浮动对象 </li>
</ul>
</li>
<li>float属性<ul>
<li>语法：float : none|left|right </li>
<li>none : 对象不浮动</li>
<li>left : 对象浮在左边</li>
<li>right : 对象浮在右边</li>
</ul>
</li>
<li>使用场景<ul>
<li>float和clear属性一般配合使用；</li>
<li>在需要文字环绕图片、段首大号文字环绕效果等情况下可使用float，请看下面的代码；</li>
</ul>
</li>
</ul>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;style type=<span class="string">"text/css"</span>&gt;</span><br><span class="line">span</span><br><span class="line">&#123;</span><br><span class="line">	float:left;</span><br><span class="line">	width:<span class="number">0.7</span>em;</span><br><span class="line">	font-size:<span class="number">400</span>%;</span><br><span class="line">	font-family:algerian,courier;</span><br><span class="line">	line-height:<span class="number">80</span>%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">&lt;span&gt;T&lt;/span&gt;his <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>. This <span class="keyword">is</span> <span class="keyword">some</span> <span class="type">text</span>.</span><br><span class="line">&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/images/css-position/css-position1.png" alt="css-position1"></p>
<ul>
<li>float也可用于实现两栏布局（这种样式在bootstrap中很容易实现）</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.main</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">600px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="class">.sidebar</span><span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">float</span>:<span class="value"> right</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-top</span>:<span class="value"> <span class="number">1.875em</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/css-position/css-position2.png" alt="css-position2"></p>
<h3 id="元素定位（position属性）">元素定位（position属性）</h3><ul>
<li>position属性的值：<ul>
<li>absolute：生成绝对定位的元素，相对于static定位以外的第一个父元素进行定位；</li>
<li>fixed：生成绝对定位的元素，相对于浏览器窗口进行定位；</li>
<li>relative：生成相对定位的元素，相对于其正常位置进行定位；</li>
<li>static：默认值。没有定位，元素出现在正常的流中（忽略 top, bottom, left, right 或者 z-index 声明）；</li>
<li>inherit：规定应该从父元素继承position属性的值；</li>
</ul>
</li>
<li>position属性深入理解：<ul>
<li>relative是相对于元素本来应该在的位置进行定位，元素本来的位置会留出空白（保留元素本来位置）；</li>
<li>absolute是相对于页面进行绝对位置定位，元素本来的位置不会留出空白（不保留元素本来的位置），直接让元素浮于整个页面，相对于整个页面进行定位，如果要设定元素之间的重叠关系可使用z-index属性；</li>
<li>z-index属性一般结合position:absolute一起使用；</li>
<li>z-index的默认值为0，z-index值越大，这个元素就越在顶层显示，通过设置各个元素的z-index值，控制他们的页面层叠关系；</li>
<li>如两个绝对定位对象的此属性具有同样的值，那么将依据它们在HTML文档中声明的顺序层叠；</li>
</ul>
</li>
</ul>
<h3 id="元素居中显示的几种方法">元素居中显示的几种方法</h3><ul>
<li>使用margin属性（首选方法）：<ul>
<li>将元素的margin-left和margin-right属性设置为auto即可，必须为该容器指定宽度；</li>
<li>本方法只适用于&gt;=IE6.0浏览器；</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin-left:auto; margin-right:auto; width:200px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"margin:0 auto; width:200px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">button</span>&gt;</span>按钮<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>使用text-align属性</p>
<ul>
<li>使用方法：<code>style=&quot;text-align: left | center | right&quot;</code></li>
<li>这个属性一般用于文字，但也可以用于其他控件或元素；</li>
<li>用于非文字的控件或元素时，这个控件以及他所有的孩子全部居中，这是不太好的一点；</li>
</ul>
</li>
<li><p>利用负外边距</p>
<ul>
<li>首先创建一个包含居中元素的容器，然后将其绝对定位于相对页面左边边缘50%的位置；</li>
<li>这样，该容器的左外边距将从页面50%宽度的位置开始算起；</li>
<li>然后，将容器的左外边距值设置为负的容器宽度的一半，这样即可将该容器固定在页面水平方向的中点；</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="id">#container</span><span class="rules">&#123;</span><br><span class="line">	<span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">760px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">380px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="元素显示">元素显示</h3><ul>
<li>display属性：</li>
</ul>
<p><img src="/images/css-position/css-position3.png" alt="css-position3"></p>
<ul>
<li>visibility属性：</li>
</ul>
<p><img src="/images/css-position/css-position4.png" alt="css-position4"></p>
<ul>
<li><p>区别：</p>
<ul>
<li>display:none：元素不可见也不占用空间；</li>
<li>visibility:hidden：元素不可见，但是占用空间，仍然会对页面布局产生影响；</li>
</ul>
</li>
<li><p>使元素不可见还可以用opacity属性设置元素完全透明，即<code>opacity: 0;</code>，效果和<code>visibility:hidden；</code>完全相同；</p>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/">Web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2015-12-5-year-books" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/05/2015-12-5-year-books/" class="article-date">
  	<time datetime="2015-12-04T16:00:00.000Z" itemprop="datePublished">2015-12-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/05/2015-12-5-year-books/">2015我的年度书单</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>2015年即将过去了，回首这一年，陪伴我的不仅仅是一行一行的代码，不仅仅是前端的知识和页面，更有书香伴我行；</li>
<li>本文列出了我2015年的书单，虽然区区几本不算多，但是每本书我都认真阅读，深受启迪；</li>
<li>书是最好的老师，为我的成长之路指明方向，给我知识、给我力量、给我正能量！希望自己在2016年能读更多的书；</li>
</ul>
<h3 id="2015-我的书单">2015-我的书单</h3><ul>
<li>《自控力》<ul>
<li>作者： [美] 凯利·麦格尼格尔 </li>
<li>本书的作者是美国斯坦福大学备受赞誉的心理学家凯利·麦格尼格尔； </li>
<li>本书帮助人们管理压力、控制情绪；</li>
<li>本书促使人们思考自己、思考自己的生活，并且在生活中做出积极的改变；</li>
<li>本书从科学的角度揭示了成功的必要要素，揭示了自控力的本质，引导人们不要为了训练自控力而训练自控力，而应当用”小步快走”式的积极的改变影响自己和自己身边的人；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book1.jpg" alt="book1"></p>
<ul>
<li>《社会心理学》<ul>
<li>作者: [美] 戴维·迈尔斯 </li>
<li>强烈建议每个人，无论您从事什么行业、什么职业，都应该读一读此书，此书绝不仅仅是一本简单的心理学教材，它会告诉您为什么人的心理有这样或是那样的想法或情绪，该如何应对，这将极大地提升您的心理健康水平和生活质量，是难得一见的好书！</li>
<li>本书从科学的角度揭示了常见的心理学效应的本质，压力的本质，情绪的本质，攻击行为和偏见的本质，群体心理和从众心理的本质，态度、自责、自尊的本质等；</li>
<li>特别推荐本书关于群体心理的章节，它能够让您了解群体在作出决策时的心理反应、怎样避免群体决策的误区、怎样避免群体决策的失衡、怎样影响甚至改变群体决策的结果；</li>
<li>本书关于自我认识的章节（发展心理学）也值得推荐，让您科学的认识自我、倾听内心的声音，让您不再为人际关系、自我认知不到位、偏弱的自我意识等常见的心理问题所困扰，并且为您在自我接纳、自我悦纳方面提出可行的建议；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book2.jpg" alt="book2"></p>
<ul>
<li>《为何家会伤人》<ul>
<li>作者：[中] 武志红</li>
<li>本书重点讲述了”家”在一个人成长、成熟、发展中的重要意义，指出了家有时候也会带来烦恼和困惑，阅读了这本书后，我更加清楚了家的重要意义，以及如何避免家人之间的冲突和误解，让家真正成为心灵的港湾；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book3.jpg" alt="book3"></p>
<ul>
<li>《大学之路》-吴军著<ul>
<li>作者：吴军</li>
<li>相信很多人都读过这本书，本书的上下册我大约花了一个月左右看完，书中讲述的美国大学的历史、人文、教学、学生活动、大学文化等给我留下深刻印象；</li>
<li>吴军博士深入浅出的分析了美国大学教育为什么强，中国大学在教学、科研等方面存在的问题和差距；</li>
<li>美国各个大学不同但是很有特色的学校文化特别吸引我，如果有机会能去亲自体验一下就是再好不过的了；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book4.jpg" alt="book4"></p>
<ul>
<li>《少有人走的路-心智成熟的旅程》<ul>
<li>作者： [美] M·斯科特·派克 </li>
<li>读完本书，最大的收获是一个人不断成长的法宝就是不断积极、主动的促进自己心智的成熟；</li>
<li>书中从正反两方面举例，让我明白了何为心智成熟、怎么是自己心智成熟、什么样的表现是心智不成熟的表现；</li>
<li>书中列举了一些自居成熟、一贯瞧不起他人、自认为什么都懂的人的外在表现和内心想法，一针见血的指出这些人其实非常自卑，自我放弃心智成熟的进程，作者为这些人感到深深的惋惜；</li>
<li>本书非常适合刚上大学的学生来阅读，我虽然上研了才读，但是也受益匪浅；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book5.jpg" alt="book5"></p>
<ul>
<li>《感谢自己的不完美》<ul>
<li>作者：[中] 武志红</li>
<li>本书特别适合那些和我一样，有完美主义倾向的人来阅读；</li>
<li>本书将会告诉您如何接纳自己、悦纳自己的优点或是缺点，指出人人都有对完美的追求，但是过度的不切实际的追求完美是不现实的；</li>
<li>本书深入浅出讲解了为什么要感谢自己的不完美，如何在不完美中实现突破和自我超越，从而在奋斗的同时体会到快乐、体会到幸福、并且真正明白人生的意义；</li>
<li>本书语言很优美，是非常文艺的一本书；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book6.jpg" alt="book6"></p>
<ul>
<li>《恰到好处的幸福》<ul>
<li>作者: [中] 毕淑敏 </li>
<li>本书不是鸡汤、胜似鸡汤，用温暖的语言让您体会到幸福的含义；</li>
<li>幸福需要我们用心体会才能得到，如果一个人整天抱怨不停、犹犹豫豫、缺乏信心、自居高傲，那么他只会离内心中的幸福越来越远；</li>
<li>互联网时代，人人的压力都很大，如果您编代码变累了，不妨拿起此书翻一翻，让您的书香中放松，体会生活中小小的幸福；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book7.jpg" alt="book7"></p>
<ul>
<li>《从0到1》<ul>
<li>作者：[美] 彼得·蒂尔 / 布莱克·马斯特斯</li>
<li>这是我读的第一本真正的”商业”书籍，因为它从头到尾都在讲怎么赚钱；</li>
<li>网上对这本书褒贬不一，有人说这本书揭示了商业的秘密，指出了创新在企业发展中的重要价值，但也有人说本书只是停留在概念表面，并没有为创业者、特别是中小企业家指出成功之路；</li>
<li>我认为本书虽然有局限性，它对”从0到1”的商业模式的阐述不是非常清晰，但是如果您对彼得·蒂尔规划的商业蓝图感兴趣，还是值得一读的；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book8.jpg" alt="book8"></p>
<ul>
<li>《组织行为学》<ul>
<li>作者: [美] 斯蒂芬·P·罗宾斯</li>
<li>说实话，我没读懂这本书，感觉中间写的有些高深莫测；</li>
<li>本书的核心就是如何让组织运转更加高效，作为管理者如何让公司用有限的人力资源、产出尽可能高的业绩和成效；</li>
<li>本书虽然挺高深，但是却是美国组织行为学权威、圣迭戈大学管理学教授斯蒂芬·P·罗宾斯撰写的经典管理教科书，如果您对组织管理、组织运转感兴趣、又期待深入研究的话，非常推荐您详细阅读此书；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book9.jpg" alt="book9"></p>
<ul>
<li>《竞争战略》<ul>
<li>作者： [美] 迈克尔•波特</li>
<li>本书是迈克尔•波特竞争三部曲之一，具有划时代的价值和意义；</li>
<li>本书是我读过的最权威的、最全面的、最具有可操作性的企业级的竞争战略书籍，不过本书在概念层面上有一些抽象，并没有提出非常具体的竞争战略，但是，从战略层面考虑问题本来就不是具体的，总体来看，本书的作者具有非凡的战略眼光和魄力，在引领企业发展、促使企业创新、完善企业管理、加快产业融合等方面观点独具一格；</li>
<li>本书详细剖析了零散型产业、新兴产业、成熟产业、衰退产业和全球性产业中的竞争战略，非常全面；</li>
<li>本书的作者迈克尔•波特毕业于普林斯顿大学，后获哈佛大学商学院企业经济学博士学位，是当今世界上竞争战略和竞争力方面公认的第一权威；</li>
<li>如果您对企业市场竞争感兴趣，强烈推荐您阅读此书；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book10.jpg" alt="book10"></p>
<ul>
<li>《策略与博弈》<ul>
<li>作者： [美] 普拉伊特・K.杜塔</li>
<li>说实话，本书的概念我感觉十分晦涩难懂，但是还是坚持看完了；</li>
<li>本书介绍了博弈论的相关知识，最大特点就是：严谨、例子多；</li>
<li>本书完整描述和展示了效用理论、动态博弈论、动态策略相互作用；</li>
<li>阅读本书需要有一定的数学基础和逻辑推理能力；</li>
<li>对博弈论和决策效用理论感兴趣的童鞋可以阅读此书，我还是很推荐哒；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book11.jpg" alt="book11"></p>
<ul>
<li>《基辛格-美国的全球战略》<ul>
<li>作者：[美] 亨利·基辛格 </li>
<li>本书作者亨利·基辛格是美国著名外交家、国际问题专家，美国前国务卿，1971年7月，基辛格作为尼克松总统特使访华，为中美关系大门的开启作出了历史性贡献；</li>
<li>本书是基辛格亲自所著，从多个角度全面分析了中美关系，本书中充满精准的判断，偶然显现的深刻洞悉力令读者阅后扼腕称赞；</li>
<li>基辛格是美国前国务卿，他对于美国和中国无论是在战略还是战术层面都非常了解，虽然在某些地方我不同意他的看法，但是书中他对于中美关系发展的总体把握和判断对于当今世界、当今的中美关系都非常有借鉴意义；</li>
<li>如果您期望了解美国人眼中的中国，特别是美国政客眼中的中国，推荐阅读本书；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book12.jpg" alt="book12"></p>
<ul>
<li>《亚太战略变局与中美新型大国关系》<ul>
<li>作者： [中] 孙哲</li>
<li>本书作者孙哲是清华大学国际问题研究所教授、博士生导师，主要从事政治学理论、国际关系及美国政治与外交方面的研究工作；</li>
<li>何谓“新型大国关系”？按照中方的说法，它是以相互尊重、互利共赢的合作伙伴关系为核心特征的；按照美方的说法，它是对“崛起国与守成国必然冲突”这一历史魔咒的打破，是以“新答案”解决“老问题”；</li>
<li>尽管双方并未使用相同的概念，两国学术界尚未对其进行系统的理论阐释，双方对其理解和期待也不尽相同，但双方业内已存在的基本共识在于：21世纪的中美关系必须避免大国对抗和零和博弈的历史覆辙，切实走出一条新路；</li>
<li>本书基于”新型大国关系”这个全新理念，系统性的阐释了亚太战略变局对于新型大国关系的影响；</li>
<li>亚太地区一直是中美双方都非常关注的热点地区，亚太的和平稳定符合中美双方共同利益和需求，如果您对于亚太地区和中美关系走向感兴趣，推荐阅读此书；</li>
</ul>
</li>
</ul>
<p><img src="/images/2015books/book13.jpg" alt="book13"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/books/">books</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/feeling/">feeling</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2015-12-3-java-mail" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/03/2015-12-3-java-mail/" class="article-date">
  	<time datetime="2015-12-02T16:00:00.000Z" itemprop="datePublished">2015-12-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/03/2015-12-3-java-mail/">java中如何实现发邮件功能</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="需求描述">需求描述</h3><ul>
<li>实验室的资源表管理系统需要这样一种功能：当资源表更改时自动给管理员发邮件；</li>
<li>由于后台是用java写的，所以需要用java实现自动发邮件的功能；</li>
<li>本文参考<a href="http://commons.apache.org/proper/commons-email/index.html" target="_blank" rel="external">这里</a></li>
</ul>
<h3 id="实现过程">实现过程</h3><ul>
<li>下载jar包并导入工程，在<a href="http://commons.apache.org/proper/commons-email/download_email.cgi" target="_blank" rel="external">这里</a>下载；</li>
<li>如果您使用的是maven工程，请在<a href="http://search.maven.org/" target="_blank" rel="external">这里</a>搜索jar包，包名称为<code>commons-email</code>,选择最新版本的jar包，将其groupId、artifactId、version等信息填入maven工程的导入jar包界面，点击导入即可；</li>
<li>不要忘记在pom.xml中加入jar包的配置信息(我使用的netbeans会自动添加)：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>commons-email<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>下面的代码即可实现发邮件的功能</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> resourcestore.applycontent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.mail.DefaultAuthenticator;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.mail.Email;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.mail.EmailException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.mail.SimpleEmail;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendMail</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">send</span><span class="params">()</span> <span class="keyword">throws</span> EmailException </span>&#123;</span><br><span class="line">        Email email = <span class="keyword">new</span> SimpleEmail();</span><br><span class="line">        email.setHostName(<span class="string">"10.106.128.254"</span>);  <span class="comment">//邮件服务器ip地址</span></span><br><span class="line">        email.setSmtpPort(<span class="number">465</span>);  <span class="comment">//邮件服务器接收邮件的端口号</span></span><br><span class="line">        email.setAuthenticator(<span class="keyword">new</span> DefaultAuthenticator(<span class="string">"name"</span>, <span class="string">"password"</span>));  <span class="comment">//登录邮件服务器的用户名密码 </span></span><br><span class="line">        email.setSSLOnConnect(<span class="keyword">true</span>);</span><br><span class="line">        email.setFrom(<span class="string">"...@..."</span>);  <span class="comment">//发送地址</span></span><br><span class="line">        email.setSubject(<span class="string">"TestMail"</span>);  <span class="comment">//邮件主题</span></span><br><span class="line">        email.setMsg(<span class="string">"This is a test mail ... :-)"</span>);  <span class="comment">//邮件内容</span></span><br><span class="line">        email.addTo(<span class="string">"...@..."</span>);  <span class="comment">//目的地址</span></span><br><span class="line">        email.send();  <span class="comment">//发送邮件</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>上面只是实现了最简单的邮件发送功能，如果需要更加复杂的、带有附件的、发送html邮件等，请看<a href="http://commons.apache.org/proper/commons-email/userguide.html" target="_blank" rel="external">这里</a>；</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mail/">mail</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Java/">Java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2015-12-1-javaEE-JSON" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/01/2015-12-1-javaEE-JSON/" class="article-date">
  	<time datetime="2015-11-30T16:00:00.000Z" itemprop="datePublished">2015-12-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/01/2015-12-1-javaEE-JSON/">javaEE中如何获取JSON格式的数据</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题描述">问题描述</h3><ul>
<li>在web开发时，如果您后台用的是javaEE，经常需要将数据转换成JSON格式，以便序列化后返回给客户端；</li>
<li>javaEE内部能够自己将list转为JSON格式，比如下面的程序，从数据库取得数据后放在list中，在return这个list的时候javaEE内部将list转为JSON格式并序列化，作为http请求实体返回给客户端；</li>
</ul>
<figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">List</span>&lt;ApplyInfo&gt; getCurrentApply(<span class="keyword">int</span> resourceId)&#123;</span><br><span class="line">        <span class="keyword">List</span>&lt;ApplyInfo&gt; <span class="keyword">list</span> = em.createQuery(<span class="string">"select a from ApplyInfo a "</span></span><br><span class="line">                + <span class="string">"where a.resourceId=:resourceId and a.isPassed=0"</span>)</span><br><span class="line">                .setParameter(<span class="string">"resourceId"</span>, resourceId)</span><br><span class="line">                .getResultList();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">list</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>但是在javaEE升级后，这样的内部转JSON的机制貌似失效了（具体原因尚不清楚）；</li>
<li>导致服务器成功取得了数据，但是客户端获取不了数据，报500错误；</li>
</ul>
<h3 id="解决方案">解决方案</h3><ul>
<li>推荐一款轻量级的快速将数据转换为JSON格式的工具–fastjson，请看<a href="https://github.com/alibaba/fastjson" target="_blank" rel="external">这里</a>；</li>
<li>它使用起来非常方便，先在工程中引入这个包：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">import</span> <span class="tag">com</span><span class="class">.alibaba</span><span class="class">.fastjson</span><span class="class">.JSON</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果您的工程的maven工程，直接search这个包即可，添加后在pom.xml中即可看到包已经被引入：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.1.41<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>直接调用JSON对象的toJSONString方法，就可将list转为JSON格式的String，然后我们手动构建http响应报文的实体：</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@<span class="literal">GET</span></span><br><span class="line">@Path(<span class="string">"userInfo"</span>)</span><br><span class="line">@Produces(&#123;<span class="string">"application/json"</span>&#125;)</span><br><span class="line">public Response getUserInfo() &#123;</span><br><span class="line">    <span class="keyword">Query</span> <span class="keyword">query</span> = em.createQuery(<span class="string">"select a.id , a.name from AuthUser a"</span>);</span><br><span class="line">    <span class="keyword">List</span>&lt;AuthUser&gt; userInfo = <span class="keyword">query</span>.getResultList();</span><br><span class="line">    System.<span class="keyword">out</span>.println(userInfo.size());</span><br><span class="line">    String <span class="keyword">u</span> = JSON.toJSONString(userInfo);</span><br><span class="line">    <span class="keyword">return</span> Response.status(200).entity(<span class="keyword">u</span>).build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>访问我们写的API，看到数据成功被返回客户端；</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaEE/">javaEE</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Java/">Java</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-selenium-rollplay" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/25/selenium-rollplay/" class="article-date">
  	<time datetime="2015-11-24T16:00:00.000Z" itemprop="datePublished">2015-11-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/selenium-rollplay/">使用selenium实现轮播</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="需求定义">需求定义</h3><ul>
<li>公司需要对外展示若干web页面，需要一种能够自动在屏幕上循环播放这些web页面的功能；</li>
<li>web页面上的按钮和各种功能点也要能够自动点击和展示；</li>
<li>现在有三种方案：用js实现、用制作视频的方式实现、用录屏的方式实现；</li>
<li>第一种方案理论上可以实现，但是如果一个页面上的功能点过多，编写js代码就显得非常繁杂，而且一旦页面的元素、控件等有所改动就需要修改代码；</li>
<li>第二种方案可能会存在视频不清晰、分辨率不高的缺点，同样，一旦系统有所变化，就需要重新录制，比较麻烦；</li>
<li>第三种方案也没有能够避免第二种方案的缺陷；</li>
<li>经过认真上网查询，我最终选择了用selenium来完成这件事；</li>
</ul>
<h3 id="为什么是selenium">为什么是selenium</h3><ul>
<li>selenium原本是一种网页自动化测试工具，可以实现自动测试网页功能和性能；</li>
<li>这里，我们只用它的”网页动作”录制的功能来实现轮播效果；</li>
<li>selenium和selenium IDE均可直接安装在firefox上面，非常方便；</li>
<li>selenium支持多种浏览器播放录制的网页动作，官网上面可下载所需的浏览器驱动，浏览器支持性较强；</li>
<li>selenium支持各种常用语言，比如java、javascript（需要安装node）、C#、Python、Ruby，让你用最擅长的语言随心所欲操控网页；</li>
<li>以java语言为例，selenium最终的录制脚本可以导出成jar包，无论是linux还是windows，只要机器上安装了java，你就可以运行jar包、开启轮播，没有比这更方便的啦！</li>
<li>下面，我就带您用selenium一步一步实现轮播；</li>
</ul>
<h3 id="下载Selenium">下载Selenium</h3><ul>
<li>下载selenium插件<ul>
<li>目前，只有firefox支持selenium插件，不知道以后会不会跨浏览器支持；</li>
<li>打开firefox，搜索插件selenium，安装插件；</li>
<li>安装完后，可以看到firefox的功能列表中已经多了selenium啦！</li>
<li>但此时启动selenium还不能够使用，这是因为我们尚未安装selenium IDE；</li>
</ul>
</li>
<li>安装Selenium IDE<ul>
<li>用firefox打开selenium官网，下载selenium IDE：<a href="http://docs.seleniumhq.org/download/" target="_blank" rel="external">点击这里下载</a>；</li>
<li>selenium IDE将直接以插件形式安装在firefox上面；</li>
</ul>
</li>
</ul>
<h3 id="Selenium_IDE使用">Selenium IDE使用</h3><ul>
<li>使用Selenium IDE来录制网页动作的方法十分简单，打开selenium后，点击红色的圆点即可开始录制，再次点击即停止录制，点击run按钮可以以设定好的速率播放相应脚本的动作，还能够将另存为脚本或者将脚本导出成为java/Ruby/Python等；</li>
</ul>
<p><img src="/images/selenium/selenium1.png" alt="selenium1"></p>
<ul>
<li>如果需要查询更复杂的功能，请看<a href="http://docs.seleniumhq.org/docs/02_selenium_ide.jsp" target="_blank" rel="external">这里</a></li>
</ul>
<h3 id="实现轮播">实现轮播</h3><ul>
<li>确保您的机器安装了java；</li>
<li>打开eclipse，新建一个工程；</li>
<li>在<a href="http://www.seleniumhq.org/download/" target="_blank" rel="external">这里</a>的Selenium Standalone Server一栏下载selenium依赖jar包，我下载的是<code>selenium-server-standalone-2.48.2.jar</code>；</li>
<li>将上述jar包导入eclipse新建的工程中，注意不要仅仅是复制进eclipse呦，还需要在工程右键build path&gt;library&gt;add jars将jar包真正添加进工程中；</li>
</ul>
<p><img src="/images/selenium/selenium2.png" alt="selenium2"></p>
<ul>
<li>然后，我们就可以开始录制脚本啦；<ul>
<li>打开Selenium插件，点击红色圆形按钮开始录制；</li>
<li>在浏览器操作一遍需要录制的动作，比如进入URL、点击按钮、选择下拉菜单等等；</li>
<li>注意在录制前将所需的用户名和密码填写好并保存，否则在录制过程中还要填写用户名密码，这样会使得轮播的展示效果变差；</li>
</ul>
</li>
<li>录制完后，点击<code>文件&gt;export test case as java/JUnit4/webDriver</code>，将脚本导出为JUnit；</li>
<li>然后我们就该处理脚本了：<ul>
<li>将脚本复制进ecplise中；</li>
<li>如果您使用的不是firefox来进行轮播，则将<code>driver = new FirefoxDriver();</code>改为<code>driver = new ChromeDriver();</code>就可以来，注意要引入外部包；</li>
<li>可以加入诸如for循环或者while(true)之类的语句，保证脚本可以自动无限次循环播放；</li>
<li>可以加入诸如<code>Thread.sleep(3000);</code>的语句来实现每个动作之间的时间驻留；</li>
<li>对于具体的网页动作，也可根据代码进行必要的修改；</li>
<li>需要注意的是，如果您使用的不是firefox来进行轮播，那么还需要下载您使用的浏览器的驱动才行，否则Selenium在启动浏览器时找不到相应的驱动会报错，各大浏览器的驱动在<a href="http://www.seleniumhq.org/download/" target="_blank" rel="external">这里</a>下载，linux版本的chrome驱动请在<a href="http://chromedriver.storage.googleapis.com/index.html" target="_blank" rel="external">这里</a>下载，chrome驱动版本和chrome版本的对应关系在<a href="https://en.wikipedia.org/wiki/Google_Chrome_release_history" target="_blank" rel="external">这里</a>查询；</li>
<li>下载完驱动后，您还需要在程序中指明驱动存放位置，即添加下述代码：</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">System</span><span class="class">.setProperty</span>("<span class="tag">webdriver</span><span class="class">.chrome</span><span class="class">.driver</span>", "<span class="tag">D</span>:\\<span class="tag">chromedriver_win32</span>\\<span class="tag">chromedriver</span><span class="class">.exe</span>");</span><br></pre></td></tr></table></figure>
<ul>
<li><p>脚本录制大功告成，下面我们可以试着播放脚本，看看效果如何：</p>
<ul>
<li>将上面工程导出为jar包；</li>
<li>用<code>java -jar jar包名称</code>运行jar包；</li>
<li>此时，Selenium将自动为您开启浏览器，并播放刚才录制的网页动作，是不是非常方便！</li>
</ul>
</li>
<li><p>需要注意的是，在linux上面运行脚本，需要对chrome驱动赋予执行权限：</p>
</li>
</ul>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">chmod</span> +<span class="keyword">x</span> chromedriver</span><br></pre></td></tr></table></figure>
<h3 id="进一步优化">进一步优化</h3><ul>
<li>实现了录制和播放脚本还不够，我们要让整个轮播的过程更加优雅！</li>
<li>可以添加下面的代码，实现浏览器自动全屏播放，是不是很炫！</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// full screen automatic</span></span><br><span class="line">ChormeOptions <span class="keyword">options</span> = <span class="keyword">new</span> ChormeOptions();</span><br><span class="line"><span class="keyword">options</span>.addArguments(<span class="string">"kiosk"</span>);</span><br><span class="line">driver = <span class="keyword">new</span> ChromeDriver(<span class="keyword">options</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果您用的是windows系统，可直接将运行jar包的命令放在.bat文件中，这样如果有人来公司参观，直接双击.bat文件就能够实现轮播了，相当方便；</li>
<li>如果您用的是linux系统，可以写一个shell脚本实现上述功能：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/sh</span></span><br><span class="line"><span class="built_in">cd</span> /home/haohan/Desktop/looping_play/</span><br><span class="line">java -jar /home/haohan/Desktop/looping_play/looping_play_linux64_2015.<span class="number">6.30</span>.jar  &amp;</span><br></pre></td></tr></table></figure>
<ul>
<li>您还可以写一个.desktop文件，即桌面图标文件，链接到上面的shell脚本，这样双击桌面图标就能开启轮播功能！</li>
</ul>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env xdg-open</span></span><br><span class="line"><span class="title"></span><br><span class="line">[Desktop Entry]</span></span><br><span class="line"><span class="setting">Version=<span class="value"><span class="number">1.0</span></span></span></span><br><span class="line"><span class="setting">Name=<span class="value">Idea</span></span></span><br><span class="line"><span class="setting">Exec=<span class="value">looping_play/looping_play.sh</span></span></span><br><span class="line"><span class="setting">Terminal=<span class="value"><span class="keyword">false</span></span></span></span><br><span class="line"><span class="setting">Icon=<span class="value">looping_play/looping_play_pic.jpg</span></span></span><br><span class="line"><span class="setting">Type=<span class="value">Application</span></span></span><br><span class="line"><span class="setting">Categories=<span class="value">Development;</span></span></span><br><span class="line"><span class="setting">Name[en_US]=<span class="value">LoopingPlay</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>现在我们完整的实现了整个轮播效果，我准备把它部署在公司门口的显示屏上，让每一个路过的人都能看到公司的产品展示！</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/selenium/">selenium</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/others/">others</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-glassfish-error" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/24/glassfish-error/" class="article-date">
  	<time datetime="2015-11-23T16:00:00.000Z" itemprop="datePublished">2015-11-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/24/glassfish-error/">glassfish 数据库连接报错的解决</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>最近实验室有人来参观，由于集群重装了，需要重新部署各个应用；</li>
<li>在部署过程中发现数据库连接失败的问题，加以总结；</li>
</ul>
<h3 id="问题描述">问题描述</h3><ul>
<li>glassfish报错：</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invalid <span class="string">resource :</span> traffic__pm</span><br></pre></td></tr></table></figure>
<ul>
<li>解决方法：<ul>
<li>根据错误提示，应该是persistence manager出错了</li>
<li>应当运行数据库注册信息，即相关resource的xml文件</li>
<li>运行后，将数据库添加到glassfish注册信息中，删除原来部署失败的war包，重启glassfish后添加新的war包即可部署成功</li>
</ul>
</li>
</ul>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/glassfish4/glassfish/bin/asadmin<span class="instruction"> add-resources </span>glassfish-resources.xml</span><br></pre></td></tr></table></figure>
<ul>
<li>如果问题还未得到解决，那说明resource配置信息出了问题，需要检查<code>glassfish-resources.xml</code>中的<code>jndi-name</code>和<code>persistence.xml</code>中的<code>&lt;jta-data-source&gt;</code>是否相同；</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/">Web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/glassfish/">glassfish</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-js-prototype" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/23/js-prototype/" class="article-date">
  	<time datetime="2015-11-22T16:00:00.000Z" itemprop="datePublished">2015-11-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/23/js-prototype/">JavaScript 原型和原型链的理解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>原型和原型链是js中比较重要但也是比较难的内容；</li>
<li>正是因为有了原型链的概念，js中的继承才成为可能；</li>
<li>本文结合js内置的数据类型，说说我对js原型和原型链的理解；</li>
</ul>
<h3 id="Javascript和Java语言设计思想的区别">Javascript和Java语言设计思想的区别</h3><ul>
<li>java<ul>
<li>java是完全OOP的语言，对Java的认知是从类与对象开始的；</li>
<li>class是一类具有共同特点的物体的抽象，object（对象）是某个class下具体的一个实现，Object类是所有类的顶层父类；</li>
</ul>
</li>
<li>js<ul>
<li>javascript是基于原型（而不是基于类的，尽管ES6新增了class关键字）的面向对象的语言，没有类的概念（ES6新增的类是语法糖）；</li>
<li>javascript中的class本质上是一个函数对象，和java中的类的概念有本质区别；</li>
<li>javascript存在类似面相对象的特性，这就是原型和原型链，从而派生出了类似于父类子类和继承的概念；</li>
</ul>
</li>
<li>本图来自<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Details_of_the_Object_Model" target="_blank" rel="external">这里</a></li>
</ul>
<p><img src="/images/prototype/java-js-diff.png" alt="java-js-diff"></p>
<h3 id="对象和数据类型">对象和数据类型</h3><ul>
<li>js中的数据类型:<ul>
<li>数据类型：string、number、boolean、object（数组、对象、null）、undefined、function；</li>
<li>数组、对象、null是不精确的数据类型，在用typeof判断时均返回object；</li>
<li>typeof关键字只能返回非精确的数据类型；</li>
<li>用Object.prototype.toString判断精确的数据类型；</li>
</ul>
</li>
</ul>
<p><img src="/images/prototype/type1.png" alt="type1"></p>
<p><img src="/images/prototype/type2.png" alt="type2"></p>
<ul>
<li>首字母大小写的区别：<ul>
<li>小写（string、number、boolean、object、null、undefined、function）表示数据类型；</li>
<li>大写（String、Number、Boolean、Object、Array）表示js的内置对象（全部是function类型）；</li>
</ul>
</li>
</ul>
<p><img src="/images/prototype/typeof.png" alt="typeof"></p>
<ul>
<li>js中对象的含义：<ul>
<li>广义的对象（js一切皆为对象、包括window和document对象、也包括String、Number、Boolean、Object、Array、Math、Date等内置对象）；</li>
<li>狭义的数据类型（数组、对象、null类型均为object，即被typeof关键字判断为object类型）;</li>
<li>“对象”这种数据类型（请参考我的<a href="http://changsiyuan.github.io/2015/11/20/js-object/" target="_blank" rel="external">另一篇博客</a>）；</li>
</ul>
</li>
</ul>
<h3 id="原型链概述">原型链概述</h3><ul>
<li>JavaScript中的每个对象都有一个内部的链接指向另一个对象，这个对象就是原对象的原型，这个原型对象也有自己的原型，直到对象的原型为 null 为止（也就是没有原型）；</li>
<li>这种一级一级的链结构就称为原型链（prototype chain）；</li>
<li>每个对象都有一个隐形的属性<strong>proto</strong>（两边都是双下划线），这个属性的值为一个地址，指向这个属性的原型对象，原型对象是每个对象都有指向的隐形对象；</li>
<li>new出来的普通对象没有构造器，就没有prototype属性；</li>
<li><strong>proto</strong>属性也可用someObject.[[Prototype]] 表示；</li>
<li>如果一个对象是object类型，它的<strong>proto</strong>属性总是指向Object.prototype； </li>
<li>如果一个对象是function类型，它的<strong>proto</strong>属性总是指向Function.prototype；</li>
<li>继承属性：JavaScritp引擎在访问对象的属性时，如果在对象本身中没有找到，则会去原型链中查找，如果找到，直接返回值，如果整个链都遍历且没有找到属性，则返回undefined； </li>
</ul>
<h3 id="各种对象原型链的图示">各种对象原型链的图示</h3><ul>
<li>String对象的原型链</li>
</ul>
<p><img src="/images/prototype/string.png" alt="string"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> s = <span class="string">"sss"</span>;</span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> <span class="built_in">String</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">String</span>);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">String</span>.prototype);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">String</span>.prototype.constructor);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">String</span>.prototype.__proto__);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">String</span>.__proto__);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s1); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s); <span class="comment">//string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s1.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.prototype.constructor); <span class="comment">// function String()&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.prototype.__proto__);  <span class="comment">//Object &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.__proto__);  <span class="comment">//function()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.prototype.constructor.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.prototype.__proto__ == <span class="built_in">Object</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(s1);  <span class="comment">//String &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(s1.__proto__);  <span class="comment">//String &#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(s);  <span class="comment">//sss</span></span><br><span class="line"><span class="built_in">console</span>.log(s.__proto__);  <span class="comment">//String &#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Number对象的原型链</li>
</ul>
<p><img src="/images/prototype/number.png" alt="number"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> n = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> n1 = <span class="keyword">new</span> <span class="built_in">Number</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Number</span>);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Number</span>.prototype);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Number</span>.prototype.constructor);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Number</span>.prototype.__proto__);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Number</span>.__proto__);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> n1); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> n); <span class="comment">//number</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> n1.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> n.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.prototype.constructor); <span class="comment">// function Number()&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.prototype.__proto__);  <span class="comment">//Object &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.__proto__);  <span class="comment">//function()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.prototype.constructor.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.prototype.__proto__ == <span class="built_in">Object</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(n1);  <span class="comment">//Number &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(n1.__proto__);  <span class="comment">//Number &#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(n);  <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(n.__proto__);  <span class="comment">//Number &#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Boolean对象的原型链</li>
</ul>
<p><img src="/images/prototype/boolean.png" alt="boolean"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> b1 = <span class="keyword">new</span> <span class="built_in">Boolean</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Boolean</span>);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Boolean</span>.prototype);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Boolean</span>.prototype.constructor);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Boolean</span>.prototype.__proto__);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Boolean</span>.__proto__);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b1); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b); <span class="comment">//boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b1.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>.prototype.constructor); <span class="comment">// function Boolean()&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>.prototype.__proto__);  <span class="comment">//Object &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>.__proto__);  <span class="comment">//function()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>.prototype.constructor.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>.prototype.__proto__ == <span class="built_in">Object</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(b1);  <span class="comment">//Boolean &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b1.__proto__);  <span class="comment">//Boolean &#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(b);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(b.__proto__);  <span class="comment">//Boolean &#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Array对象的原型链</li>
</ul>
<p><img src="/images/prototype/array.png" alt="array"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> a =[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> a1 = <span class="keyword">new</span> <span class="built_in">Array</span>(); </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Array</span>);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Array</span>.prototype);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Array</span>.prototype.constructor);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Array</span>.prototype.__proto__);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Array</span>.__proto__);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a1); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a1.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.constructor); <span class="comment">// function Array()&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.__proto__);  <span class="comment">//Object &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.__proto__);  <span class="comment">//function()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.constructor.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.__proto__ == <span class="built_in">Object</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(a1);  <span class="comment">//[]</span></span><br><span class="line"><span class="built_in">console</span>.log(a1.__proto__);  <span class="comment">//包含Array的各种方法</span></span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">//[1,2,3]</span></span><br><span class="line"><span class="built_in">console</span>.log(a.__proto__);  <span class="comment">//包含Array的各种方法</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Function对象的原型链</li>
</ul>
<p><img src="/images/prototype/function.png" alt="function"></p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   var f = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">var f1 = new <span class="function"><span class="keyword">Function</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(typeof <span class="function"><span class="keyword">Function</span></span>);  //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(typeof <span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>);  //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(typeof <span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>.constructor);  //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(typeof <span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>.__proto__);  //object</span><br><span class="line">console.<span class="built_in">log</span>(typeof <span class="function"><span class="keyword">Function</span>.<span class="title">__proto__</span></span>);  //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(typeof f1); //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(typeof f); //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(typeof f1.__proto__); //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(typeof f.__proto__); //<span class="function"><span class="keyword">function</span></span></span><br><span class="line">console.<span class="built_in">log</span>(<span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>.constructor); // <span class="function"><span class="keyword">function</span></span> <span class="function"><span class="keyword">Function</span><span class="params">()</span></span>&#123;...&#125;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>.__proto__);  //Object &#123;&#125;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="function"><span class="keyword">Function</span>.<span class="title">__proto__</span></span>);  //<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">console.<span class="built_in">log</span>(<span class="function"><span class="keyword">Function</span>.<span class="title">__proto__</span></span> == <span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>);  //true</span><br><span class="line">console.<span class="built_in">log</span>(<span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>.constructor.__proto__ == <span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>);  //true</span><br><span class="line">console.<span class="built_in">log</span>(<span class="function"><span class="keyword">Function</span>.<span class="title">prototype</span></span>.__proto__ == Object.prototype);  //true</span><br><span class="line">console.<span class="built_in">log</span>(f1);  //<span class="function"><span class="keyword">function</span></span> anonymous()&#123;&#125;</span><br><span class="line">console.<span class="built_in">log</span>(f1.__proto__);  //<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">console.<span class="built_in">log</span>(f);  //<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">console.<span class="built_in">log</span>(f.__proto__);  //<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Object对象的原型链</li>
</ul>
<p><img src="/images/prototype/object.png" alt="object"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> o1 = <span class="keyword">new</span> <span class="built_in">Object</span>(); </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>.prototype);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>.prototype.constructor);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>.prototype.__proto__);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>.__proto__);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> o1); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> o); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> o1.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> o.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.constructor); <span class="comment">// function Object()&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__);  <span class="comment">//null</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.__proto__);  <span class="comment">//function()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.constructor.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__ == <span class="literal">null</span>);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(o1);  <span class="comment">//Object&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(o1.__proto__);  <span class="comment">//Object&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(o);  <span class="comment">//Object&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(o.__proto__);  <span class="comment">//Object&#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>自定义对象的原型链</li>
</ul>
<p><img src="/images/prototype/myobject.png" alt="myobject"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"Jack"</span>,<span class="number">22</span>);</span><br><span class="line"><span class="keyword">var</span> p = &#123;<span class="string">"Jack"</span>:<span class="number">22</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Person);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Person.prototype);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Person.prototype.constructor);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Person.prototype.__proto__);  <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Person.__proto__);  <span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> p1); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> p); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> p1.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> p.__proto__); <span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.constructor); <span class="comment">// function Person()&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.__proto__);  <span class="comment">//Object &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.__proto__);  <span class="comment">//function()&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.constructor.__proto__ == <span class="built_in">Function</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.__proto__ == <span class="built_in">Object</span>.prototype);  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(p1);  <span class="comment">//Person &#123;name: "Jack", age: 22&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p1.__proto__);  <span class="comment">//Person&#123;...&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p);  <span class="comment">//Object &#123;Jack: 22&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.__proto__);  <span class="comment">//Object&#123;...&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>最后附上一张知乎上面大神画的图，清楚地表示了Object和Function的继承关系</li>
</ul>
<p><img src="/images/prototype/prototype.png" alt="prototype"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-js-object" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/20/js-object/" class="article-date">
  	<time datetime="2015-11-19T16:00:00.000Z" itemprop="datePublished">2015-11-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/20/js-object/">JavaScript 对象详解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="创建对象">创建对象</h3><ul>
<li>使用对象初始化器来创建对象</li>
</ul>
<figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;key<span class="number">_1</span>:<span class="keyword">value</span><span class="number">_1</span>,</span><br><span class="line">           key<span class="number">_2</span>:<span class="keyword">value</span><span class="number">_2</span>,...&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var myObj = &#123;<span class="string">color:</span> red, <span class="string">wheels:</span><span class="number">4</span>, <span class="string">engine:</span>&#123;<span class="string">cylinders:</span> <span class="number">4</span>, <span class="string">size:</span> <span class="number">2.2</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用Object.create()方法创建对象<ul>
<li>语法是(属性描述符会在下面讲解)：</li>
</ul>
</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.<span class="function"><span class="title">create</span><span class="params">(proto, [ propertiesObject ])</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">o = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype, &#123;</span><br><span class="line">  <span class="comment">// foo会成为所创建对象的数据属性</span></span><br><span class="line">  foo: &#123; writable:<span class="literal">true</span>, configurable:<span class="literal">true</span>, value: <span class="string">"hello"</span> &#125;,</span><br><span class="line">  <span class="comment">// bar会成为所创建对象的访问器属性</span></span><br><span class="line">  bar: &#123;</span><br><span class="line">    configurable: <span class="literal">false</span>,</span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">10</span> &#125;,</span><br><span class="line">    set: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">"Setting `o.bar` to"</span>, value) &#125;</span><br><span class="line">&#125;&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>混合构造函数和原型方式创建对象</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">"Jack"</span>;</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Parent.prototype.lev = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> Parent();</span><br><span class="line">alert(x.lev());  <span class="comment">//Jack</span></span><br></pre></td></tr></table></figure>
<h3 id="对象属性的遍历">对象属性的遍历</h3><ul>
<li>遍历属性</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;prop1: <span class="number">4</span>, prop2: <span class="number">5</span>, prop3: <span class="number">6</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(var i in obj)&#123;</span><br><span class="line">    console.<span class="built_in">log</span>(i);  <span class="comment">//prop1 prop2 prop3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>遍历属性值</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;prop1: <span class="number">4</span>, prop2: <span class="number">5</span>, prop3: <span class="number">6</span>&#125;;</span><br><span class="line"><span class="keyword">for</span>(var i in obj)&#123;</span><br><span class="line">    console.<span class="built_in">log</span>(obj[i]);  <span class="comment">//4 5 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="对象常用操作">对象常用操作</h3><ul>
<li>对象的访问<ul>
<li>obj.name和obj[“name”]效果一样；</li>
</ul>
</li>
<li>获取key值组成的数组</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="built_in">Object</span>.keys(obj);</span><br></pre></td></tr></table></figure>
<ul>
<li>删除对象或属性</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">delete</span> objectName;</span></span><br><span class="line"><span class="operator"><span class="keyword">delete</span> objectName.prop;</span></span><br><span class="line"><span class="operator"><span class="keyword">delete</span> prop;</span>  //仅仅在with语句中可以使用</span><br></pre></td></tr></table></figure>
<h3 id="getter和setter">getter和setter</h3><ul>
<li>getter和setter是对象属性的属性描述符的一种，可以在定义对象属性的时候指明；</li>
<li>getter和setter用于获取或者修改对象的某个属性；</li>
<li>通过对象初始化器在创建对象的时候指明：</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var o = &#123;</span><br><span class="line">        a : <span class="number">7</span>,</span><br><span class="line">        <span class="function">get <span class="title">b</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.a +<span class="number">1</span>;&#125;,  <span class="comment">//通过 get,set的 b,c方法间接性修改a属性</span></span><br><span class="line">        <span class="function"><span class="built_in">set</span> <span class="title">c</span><span class="params">(x)</span></span>&#123;<span class="keyword">this</span>.a = x/<span class="number">2</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    console.<span class="built_in">log</span>(o.a);  <span class="comment">//7</span></span><br><span class="line">    console.<span class="built_in">log</span>(o.b);  <span class="comment">//8</span></span><br><span class="line">    o.c = <span class="number">50</span>;</span><br><span class="line">    console.<span class="built_in">log</span>(o.a);  <span class="comment">//25</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 Object.create 方法指定：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> o = <span class="literal">null</span>;</span><br><span class="line">    o = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype,<span class="comment">//指定原型为 Object.prototype</span></span><br><span class="line">            &#123;</span><br><span class="line">                bar:&#123;</span><br><span class="line">                    get :<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">this</span>.a;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    set : <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"Setting `o.bar` to "</span>,val);</span><br><span class="line">                        <span class="keyword">this</span>.a = val;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    configurable :<span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;   <span class="comment">//第二个参数</span></span><br><span class="line">        );</span><br><span class="line">    o.a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(o.bar);  <span class="comment">//10</span></span><br><span class="line">    o.bar = <span class="number">12</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(o.bar);  <span class="comment">//12</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 Object.defineProperty 方法指定：<ul>
<li>Object.defineProperty() 方法直接在一个对象上定义一个新属性，或者修改一个已经存在的属性，并返回这个对象;</li>
<li>语法：<code>Object.defineProperty(obj, prop, descriptor)</code></li>
<li>参数：obj 需要定义属性的对象；prop 需被定义或修改的属性名；descriptor 需被定义或修改的属性的描述符；</li>
</ul>
</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var o = <span class="collection">&#123; a : <span class="number">1</span>&#125;</span>  //声明一个对象,包含一个 a 属性,值为<span class="number">1</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"b"</span>,<span class="collection">&#123;</span><br><span class="line">        get: function <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">            return this.a;</span><br><span class="line">        &#125;</span>,</span><br><span class="line">        set : function <span class="list">(<span class="keyword"><span class="built_in">val</span></span>)</span> <span class="collection">&#123;</span><br><span class="line">            this.a = val;</span><br><span class="line">        &#125;</span>,</span><br><span class="line">        configurable : <span class="literal">true</span></span><br><span class="line">    &#125;</span>)</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.b</span>)</span><span class="comment">;</span></span><br><span class="line">    o.b = <span class="number">2</span><span class="comment">;</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.b</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用 Object.defineProperties方法指定：<ul>
<li>概述：<code>Object.defineProperties()</code> 方法在一个对象上添加或修改一个或者多个自有属性，并返回该对象;</li>
<li>语法：<code>Object.defineProperties(obj, props)</code></li>
<li>参数：obj 将要被添加属性或修改属性的对象；props 该对象的一个或多个键值对定义了将要为对象添加或修改的属性的具体配置；</li>
<li>用法与 Object.defineProperty 方法类似；</li>
</ul>
</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var obj = <span class="collection">&#123;a:1,b:<span class="string">"string"</span>&#125;</span><span class="comment">;</span></span><br><span class="line">    Object.defineProperties<span class="list">(<span class="keyword">obj</span>,<span class="collection">&#123;</span><br><span class="line">        <span class="string">"A"</span>:<span class="collection">&#123;</span><br><span class="line">            get:function<span class="list">()</span><span class="collection">&#123;return this.a+1;&#125;</span>,</span><br><span class="line">            set:function<span class="list">(<span class="keyword"><span class="built_in">val</span></span>)</span><span class="collection">&#123;this.a = val;&#125;</span></span><br><span class="line">        &#125;</span>,</span><br><span class="line">        <span class="string">"B"</span>:<span class="collection">&#123;</span><br><span class="line">            get:function<span class="list">()</span><span class="collection">&#123;return this.b+2;&#125;</span>,</span><br><span class="line">            set:function<span class="list">(<span class="keyword"><span class="built_in">val</span></span>)</span><span class="collection">&#123;this.b = val&#125;</span></span><br><span class="line">        &#125;</span></span><br><span class="line">    &#125;</span>)</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.A</span>)</span><span class="comment">;</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.B</span>)</span><span class="comment">;</span></span><br><span class="line">    obj.A = <span class="number">3</span><span class="comment">;</span></span><br><span class="line">    obj.B = <span class="string">"hello"</span><span class="comment">;</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.A</span>)</span><span class="comment">;</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.B</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用 Object.prototype.<em>defineGetter</em>以及 Object.prototype.<em>defineSetter</em>方法指定：</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var o = <span class="collection">&#123;a:1&#125;</span><span class="comment">;</span></span><br><span class="line">    o.__defineGetter__<span class="list">(<span class="string">"giveMeA"</span>, function <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">        return this.a;</span><br><span class="line">    &#125;</span>)</span><span class="comment">;</span></span><br><span class="line">    o.__defineSetter__<span class="list">(<span class="string">"setMeNew"</span>, function <span class="list">(<span class="keyword"><span class="built_in">val</span></span>)</span> <span class="collection">&#123;</span><br><span class="line">        this.a  = val;</span><br><span class="line">    &#125;</span>)</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.giveMeA</span>)</span><span class="comment">;  //1</span></span><br><span class="line">    o.setMeNew = <span class="number">2</span><span class="comment">;</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.giveMeA</span>)</span><span class="comment">;  //2</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h3 id="属性描述符">属性描述符</h3><ul>
<li>说明：<ul>
<li>对象里目前存在的属性描述符有两种主要形式：数据描述符和存取描述符。</li>
<li>数据描述符是一个拥有可写或不可写值的属性。</li>
<li>存取描述符是由一对 getter-setter 函数功能来描述的属性。</li>
<li>描述符必须是两种形式之一；不能同时是两者。</li>
</ul>
</li>
<li>数据描述符和存取描述符均具有以下可选键值：</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">configurable</span></span><br><span class="line">    当且仅当这个属性描述符值为 <span class="built_in">true</span> 时，该属性可能会改变，也可能会被从相应的对象删除。默认为 <span class="built_in">false</span>。</span><br><span class="line">enumerable  </span><br><span class="line">    <span class="built_in">true</span> 当且仅当该属性出现在相应的对象枚举属性中。默认为 <span class="built_in">false</span>。</span><br></pre></td></tr></table></figure>
<ul>
<li>数据描述符同时具有以下可选键值：</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">value </span><br><span class="line">    与属性相关的值。可以是任何有效的 JavaScript 值（数值，对象，函数等）。默认为 <span class="literal">undefined</span>。</span><br><span class="line">writable </span><br><span class="line">    <span class="literal">true</span> 当且仅当可能用 赋值运算符 改变与属性相关的值。默认为 <span class="literal">false</span>。</span><br></pre></td></tr></table></figure>
<ul>
<li>存取描述符同时具有以下可选键值：</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">get</span> </span><br><span class="line">    一个给属性提供 getter 的方法，如果没有 getter 则为 <span class="literal">undefined</span>。方法将返回用作属性的值。默认为 <span class="literal">undefined</span>。</span><br><span class="line"><span class="keyword">set</span></span><br><span class="line">    一个给属性提供 setter 的方法，如果没有 setter 则为 <span class="literal">undefined</span>。该方法将收到作为唯一参数的新值分配给属性。默认为 <span class="literal">undefined</span>。</span><br></pre></td></tr></table></figure>
<ul>
<li><p>上面键值的含义：</p>
<ul>
<li>数据描述符包括两个属性 : value 属性以及 writable属性，第一个属性用来声明当前欲修饰的属性的值，第二个属性用来声明当前对象是否可写即是否可以修改；</li>
<li>存取描述符就包括 get 与 set 属性用来声明欲修饰的象属性的 getter 及 setter；</li>
<li>属性描述符内部，数据描述符与存取描述符只能存在其中之一，但是不论使用哪个描述符都可以同时设置 configurable 属性以及enumerable 属性；</li>
<li>configurable属性用来声明欲修饰的属性是否能够配置，仅有当其值为 true 时，被修饰的属性才有可能能够被删除，或者重新配置；</li>
<li>enumerable 属性用来声明欲修饰属性是否可以被枚举，决定属性是否能被 for…in 循环或 Object.keys 方法遍历得到；</li>
</ul>
</li>
<li><p>create方法为显示配置对象的属性和值，如不声明将按照属性描述符的默认值：</p>
</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var obj = <span class="collection">&#123;&#125;</span><span class="comment">;</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">obj</span>,<span class="string">"key"</span>,<span class="collection">&#123;</span><br><span class="line">    	value:<span class="string">"static"</span></span><br><span class="line">                        //没有设置 enumerable 使用默认值 <span class="literal">false</span></span><br><span class="line">                        //没有 configurable 使用默认值 <span class="literal">false</span></span><br><span class="line">                        //没有 writable 使用默认值 <span class="literal">false</span></span><br><span class="line">                    &#125;</span>)</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.key</span>)</span><span class="comment">;           // static</span></span><br><span class="line">    obj.key = <span class="string">"new"</span>                 //尝试修改其值,修改将失败,因为 writable 为 <span class="literal">false</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.key</span>)</span><span class="comment">;           // static</span></span><br><span class="line">    delete obj.key;                 //尝试删除属性,失败,因为 configurable 使用默认值 <span class="literal">false</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.key</span>)</span><span class="comment">;           // static</span></span><br><span class="line">    obj.a = <span class="number">1</span><span class="comment">;                      //动态添加一个属性</span></span><br><span class="line">    for<span class="list">(<span class="keyword"><span class="built_in">var</span></span> item in obj)</span><span class="collection">&#123;           //遍历所有 obj 的可枚举属性</span><br><span class="line">    	console.log<span class="list">(<span class="keyword">item</span>)</span><span class="comment">;</span></span><br><span class="line">    &#125;</span>                               //只输出一个 “a” 因为 “key”的 enumerable为 <span class="literal">false</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>defineProperty、defineProperties方法为显示配置对象的属性和值，如不声明将按照属性描述符的默认值：</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var obj = <span class="collection">&#123;&#125;</span><span class="comment">;</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">obj</span>,<span class="string">"key"</span>,<span class="collection">&#123;</span><br><span class="line">    	value : <span class="string">"static"</span></span><br><span class="line">                         //没有设置 enumerable 使用默认值 <span class="literal">false</span></span><br><span class="line">                         //没有 configurable 使用默认值 <span class="literal">false</span></span><br><span class="line">                         //没有 writable 使用默认值 <span class="literal">false</span></span><br><span class="line">    &#125;</span>)</span></span><br><span class="line"></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.key</span>)</span><span class="comment">;           // static</span></span><br><span class="line">    obj.key = <span class="string">"new"</span>                 //尝试修改其值,修改将失败,因为 writable 为 <span class="literal">false</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.key</span>)</span><span class="comment">;           // static</span></span><br><span class="line">    delete obj.key;                 //尝试删除属性,失败,因为 configurable 使用默认值 <span class="literal">false</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">obj.key</span>)</span><span class="comment">;           // static</span></span><br><span class="line">    obj.a = <span class="number">1</span><span class="comment">;                      //动态添加一个属性</span></span><br><span class="line">    for<span class="list">(<span class="keyword"><span class="built_in">var</span></span> item in obj)</span><span class="collection">&#123;           //遍历所有 obj 的可枚举属性</span><br><span class="line">    	console.log<span class="list">(<span class="keyword">item</span>)</span><span class="comment">;</span></span><br><span class="line">    &#125;</span>                               //只输出一个 “a” 因为 “key”的 enumerable为 <span class="literal">false</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>var o = {};  o.a = 1;</code>这个语句却和上面不同，它的等价配置如下：</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var o = <span class="collection">&#123;&#125;</span><span class="comment">;</span></span><br><span class="line">    o.a = <span class="number">1</span><span class="comment">;</span></span><br><span class="line">    //等价于</span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;value : <span class="number">1</span>,</span><br><span class="line">                                writable : <span class="literal">true</span>,</span><br><span class="line">                                configurable : <span class="literal">true</span>,</span><br><span class="line">                                enumerable : <span class="literal">true</span>&#125;</span>)</span><span class="comment">;</span></span><br><span class="line">    </span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;value :<span class="number">1</span>&#125;</span>)</span><span class="comment">;</span></span><br><span class="line">    //等价于</span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;value : <span class="number">1</span>,</span><br><span class="line">                                writable : <span class="literal">false</span>,</span><br><span class="line">                                configurable : <span class="literal">false</span>,</span><br><span class="line">                                enumerable : <span class="literal">false</span>&#125;</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Enumerable属性专项研究：<ul>
<li>属性特性 enumerable 决定属性是否能被 for…in 循环或 Object.keys 方法遍历得到；</li>
</ul>
</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var o = <span class="collection">&#123;&#125;</span><span class="comment">;</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;value :<span class="number">1</span>,enumerable <span class="attribute">:true</span>&#125;</span>)</span><span class="comment">;</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"b"</span>,<span class="collection">&#123;value :<span class="number">2</span>,enumerable <span class="attribute">:false</span>&#125;</span>)</span><span class="comment">;</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"c"</span>,<span class="collection">&#123;value :<span class="number">2</span>&#125;</span>)</span><span class="comment">;   //enumerable default to false</span></span><br><span class="line">    o.d = <span class="number">4</span><span class="comment">;    //如果直接赋值的方式创建对象的属性,则这个属性的 enumerable 为 true</span></span><br><span class="line"></span><br><span class="line">    for<span class="list">(<span class="keyword"><span class="built_in">var</span></span> item in o)</span><span class="collection">&#123; //遍历所有可枚举属性包括继承的属性</span><br><span class="line">        console.log<span class="list">(<span class="keyword">item</span>)</span><span class="comment">;  //a d</span></span><br><span class="line">    &#125;</span></span><br><span class="line"></span><br><span class="line">    console.log<span class="list">(<span class="keyword">Object.keys</span><span class="list">(<span class="keyword">o</span>)</span>)</span><span class="comment">; //输出["a","d"],获取o对象的所有可遍历属性不包括继承的属性</span></span><br><span class="line"></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.propertyIsEnumerable</span><span class="list">(<span class="keyword">'a'</span>)</span>)</span><span class="comment">;   //true</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.propertyIsEnumerable</span><span class="list">(<span class="keyword">'b'</span>)</span>)</span><span class="comment">;   //false</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.propertyIsEnumerable</span><span class="list">(<span class="keyword">'c'</span>)</span>)</span><span class="comment">;   //false</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.propertyIsEnumerable</span><span class="list">(<span class="keyword">'d'</span>)</span>)</span><span class="comment">;   //true</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Configurable属性专项研究：<ul>
<li>Configurable属性如果为false，表示对象的Configurable、Enumerable、value、writable、set、get属性一旦确定（包含默认确定的）就不能再更改，对象的这个属性也不能被删除；</li>
</ul>
</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> <span class="list">()</span> <span class="collection">&#123;</span><br><span class="line">    var o = <span class="collection">&#123;&#125;</span><span class="comment">;</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;get: function <span class="list">()</span> <span class="collection">&#123;return <span class="number">1</span><span class="comment">;&#125;,</span></span><br><span class="line">                                configurable : <span class="literal">false</span>&#125;</span> )<span class="comment">;</span></span><br><span class="line">                                //enumerable 默认为 <span class="literal">false</span>,</span><br><span class="line">                                //value 默认为 undefined,</span><br><span class="line">                                //writable 默认为 <span class="literal">false</span>,</span><br><span class="line">                                //set 默认为 undefined</span><br><span class="line">                                  </span><br><span class="line">    //抛出异常,因为最开始定义了 configurable 为 <span class="literal">false</span>,故后期无法对其进行再配置</span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;configurable : <span class="literal">true</span>&#125;</span> )</span><span class="comment">;</span></span><br><span class="line">    //抛出异常,因为最开始定义了 configurable 为 <span class="literal">false</span>,故后期无法对其进行再配置,enumerable 的原值为 <span class="literal">false</span></span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;enumerable : <span class="literal">true</span>&#125;</span> )</span><span class="comment">;</span></span><br><span class="line">    //抛出异常,因为最开始定义了 configurable 为 <span class="literal">false</span>,set的原值为 undefined</span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;set : function<span class="list">(<span class="keyword"><span class="built_in">val</span></span>)</span><span class="collection">&#123;&#125;</span>&#125;</span> )</span><span class="comment">;</span></span><br><span class="line">    //抛出异常,因为最开始定义了 configurable 为 <span class="literal">false</span>,故无法进行覆盖,尽管想用一样的来覆盖</span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;get : function<span class="list">()</span><span class="collection">&#123;return <span class="number">1</span>&#125;</span>&#125;</span>)</span><span class="comment">;</span></span><br><span class="line">    //抛出异常，因为最开始定义了 configurable 为 <span class="literal">false</span>,故无法将其进行重新配置把属性描述符从存取描述符改为数据描述符</span><br><span class="line">    Object.defineProperty<span class="list">(<span class="keyword">o</span>,<span class="string">"a"</span>,<span class="collection">&#123;value : <span class="number">12</span>&#125;</span>)</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.a</span>)</span><span class="comment">;//输出1</span></span><br><span class="line">    delete o.a;      //想要删除属性,将失败</span><br><span class="line">    console.log<span class="list">(<span class="keyword">o.a</span>)</span><span class="comment">;//输出1</span></span><br><span class="line">    </span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span></span></span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-js-var" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/11/js-var/" class="article-date">
  	<time datetime="2015-11-10T16:00:00.000Z" itemprop="datePublished">2015-11-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/11/js-var/">javascript var关键字详解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="关于var关键字需要知道的">关于var关键字需要知道的</h3><ul>
<li>对于var关键字，要么定义全局变量、要么定义函数内变量；</li>
<li>不能定义只在一个语句块儿内部起作用的变量；</li>
<li>这叫做js的函数级作用域(function-level scope)；</li>
</ul>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">(<span class="keyword">function</span> test<span class="list">()</span><span class="collection">&#123;</span><br><span class="line">    if <span class="list">(<span class="keyword">true</span>)</span> <span class="collection">&#123;</span><br><span class="line">      x = <span class="number">5</span><span class="comment">;  //x的作用域为全局</span></span><br><span class="line">    &#125;</span></span><br><span class="line">    console.log<span class="list">(<span class="keyword">x</span>)</span><span class="comment">; // 5</span></span><br><span class="line">&#125;</span>)</span><span class="list">()</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line"> 	<span class="keyword">var</span> x = <span class="number">1</span>; </span><br><span class="line"> 	<span class="keyword">if</span> (x) &#123; </span><br><span class="line"> 		(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line"> 			<span class="keyword">var</span> x = <span class="number">2</span>; </span><br><span class="line"> 		&#125;()); </span><br><span class="line"> 	&#125; </span><br><span class="line"> 	<span class="built_in">console</span>.log(x);  <span class="comment">//1</span></span><br><span class="line"> &#125; </span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>
<h3 id="在严格模式下不能定义一个不被var修饰的变量">在严格模式下不能定义一个不被var修饰的变量</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> 	<span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"> 		x = <span class="number">5</span>;  <span class="comment">//x的作用域为全局,严格模式报错</span></span><br><span class="line"> 	&#125;</span><br><span class="line">    <span class="built_in">console</span>.log(x); <span class="comment">// 5</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h3 id="用let关键字定义块儿级作用域变量">用let关键字定义块儿级作用域变量</h3><ul>
<li>下面程序的lemma变量作用域为if语句块儿中；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">"use strict"</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line"> 	<span class="keyword">if</span>(x&gt;y)&#123;</span><br><span class="line"> 		<span class="keyword">let</span> lemma = x+<span class="number">3</span>;</span><br><span class="line"> 		alert(lemma*y);  <span class="comment">//5</span></span><br><span class="line"> 	&#125;</span><br><span class="line"> 	alert(lemma);  <span class="comment">// error</span></span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">2</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h3 id="javascript变量提升（hoisting）">javascript变量提升（hoisting）</h3><ul>
<li>变量提升是指，你可以引用稍后声明的变量，而不会引发异常；</li>
<li>JavaScript变量感觉上是被“举起”或提升到了所有函数和语句之前；</li>
<li>提升后的变量将返回 undefined 值；</li>
<li>即使在使用或引用后面存在声明和初始化操作，仍将返回 undefined值；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(x === <span class="literal">undefined</span>); <span class="comment">// logs "true"</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myvar = <span class="string">"my value"</span>;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(myvar); <span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">var</span> myvar = <span class="string">"local value"</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h3 id="定义常量">定义常量</h3><ul>
<li>可以用关键字 const 创建一个只读的常量；</li>
<li>常量标识符的命名规则和变量的相同：必须以字母、下划线或美元符号开头并可以包含有字母、数字或下划线；</li>
<li>常量不可以通过赋值改变其值，也不可以在脚本运行时重新声明;</li>
<li>常量，包括全局常量，都必须带const关键字;</li>
<li>若const关键字被省略了，该标识符将被视为变量;</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> prefix = <span class="string">'212'</span>;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Web/">Web</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 Eric Chang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
	
	<a rel="license" href="http://creativecommons.org/licenses/by/3.0/cn/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/cn/88x31.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by/3.0/cn/">知识共享署名 3.0 中国大陆许可协议</a>进行许可。
	
	<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','1BK1VZMDEA-ktxiBz_9B');
</script>

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1258423514'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1258423514%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
          
	
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>