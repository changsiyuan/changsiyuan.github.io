<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Eric Chang&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="~爱前端，爱生活~">
<meta property="og:type" content="website">
<meta property="og:title" content="Eric Chang's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Eric Chang's Blog">
<meta property="og:description" content="~爱前端，爱生活~">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eric Chang's Blog">
<meta name="twitter:description" content="~爱前端，爱生活~">
  
    <link rel="alternative" href="/atom.xml" title="Eric Chang&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">


	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/images/me.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/" style="font-family: Microsoft Yahei;">Eric Chang</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/tags/feeling">感悟</a></li>
				        
							<li><a href="/tags/me">关于</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/changsiyuan" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/2803286360" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="mailto:changsiyuan2011@126.com" title="mail">mail</a>
					        
								<a class="linkedin" target="_blank" href="http://www.linkedin.com/profile/preview?locale=zh_CN&trk=prof-0-sb-preview-primary-button" title="linkedin">linkedin</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Angularjs/" style="font-size: 11.25px;">Angularjs</a> <a href="/tags/JSONP/" style="font-size: 10px;">JSONP</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 18.75px;">JavaScript</a> <a href="/tags/Latex/" style="font-size: 10px;">Latex</a> <a href="/tags/Linkedlist/" style="font-size: 11.25px;">Linkedlist</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Operating-System/" style="font-size: 10px;">Operating System</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/Tree/" style="font-size: 11.25px;">Tree</a> <a href="/tags/Web/" style="font-size: 17.5px;">Web</a> <a href="/tags/books/" style="font-size: 11.25px;">books</a> <a href="/tags/computer/" style="font-size: 11.25px;">computer</a> <a href="/tags/cooking/" style="font-size: 10px;">cooking</a> <a href="/tags/css/" style="font-size: 12.5px;">css</a> <a href="/tags/datebase/" style="font-size: 13.75px;">datebase</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/feeling/" style="font-size: 16.25px;">feeling</a> <a href="/tags/git/" style="font-size: 11.25px;">git</a> <a href="/tags/glassfish/" style="font-size: 10px;">glassfish</a> <a href="/tags/hadoop/" style="font-size: 16.25px;">hadoop</a> <a href="/tags/hardware/" style="font-size: 10px;">hardware</a> <a href="/tags/hdfs/" style="font-size: 10px;">hdfs</a> <a href="/tags/html/" style="font-size: 11.25px;">html</a> <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/jQuery/" style="font-size: 12.5px;">jQuery</a> <a href="/tags/javaEE/" style="font-size: 10px;">javaEE</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/mail/" style="font-size: 10px;">mail</a> <a href="/tags/mapreduce/" style="font-size: 13.75px;">mapreduce</a> <a href="/tags/me/" style="font-size: 10px;">me</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/node-js/" style="font-size: 10px;">node.js</a> <a href="/tags/others/" style="font-size: 11.25px;">others</a> <a href="/tags/psychology/" style="font-size: 11.25px;">psychology</a> <a href="/tags/publicity/" style="font-size: 10px;">publicity</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/translation/" style="font-size: 11.25px;">translation</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.ruanyifeng.com/home.html">阮一峰</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://es6.ruanyifeng.com/#README">ES6</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">MDN-JavaScript</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.uisdc.com/">优设网</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我叫常思源，毕业于北京邮电大学。专注前端开发事业。虽然在很多方面仍是小白，但我会不断努力哒~</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Eric Chang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/images/me.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Eric Chang</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/tags/feeling">感悟</a></li>
		        
					<li><a href="/tags/me">关于</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/changsiyuan" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/2803286360" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="mailto:changsiyuan2011@126.com" title="mail">mail</a>
			        
						<a class="linkedin" target="_blank" href="http://www.linkedin.com/profile/preview?locale=zh_CN&trk=prof-0-sb-preview-primary-button" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-year-books" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/12/year-books/" class="article-date">
  	<time datetime="2016-12-11T16:00:00.000Z" itemprop="datePublished">2016-12-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/12/year-books/">2016我的年度书单</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>2016年，我把所有的精力都放在了找实习和工作上，同时还要完成学校要求的小论文和毕业论文，几乎没什么精力来读“闲书”，下面这些书都是每天临睡前看一会儿，积少成多读完的。</li>
<li>读书能让我静下心，认真思考我自己，认真思考这个世界，思考清楚了，才有“静力”，做起事情来才更有“动力”。</li>
<li>我不喜欢读电子书，下面所有的书我都是买来或者从图书馆借来纸质版的书籍阅读。</li>
<li>我认为自己思想还不够深入、品性还需要磨砺，我读书的目的正是为了修炼性格、磨砺自己。</li>
<li>下面是我的2016书单，欢迎大家赞赏、吐槽、拍砖。</li>
</ul>
<h3 id="2016-我的书单">2016-我的书单</h3><ul>
<li>《自卑与超越》<ul>
<li>作者： [奥地利] 阿弗雷德·阿德勒 </li>
<li>本书作者阿弗雷德·阿德勒是弗洛伊德精神分析学派的核心成员之一，他立足于个体心理学，在本书中全面阐释了自卑的含义和意义，对人的自卑心理全面分析，将自卑的产生、发展、认识描绘的淋漓尽致，是对人性中自卑情结最为深刻的刻画。</li>
<li>本书不仅具有较大的理论价值，也具有较大的使用价值。本书从社会生活、商业、人文、教育等多方面分析了自卑情结，深刻揭示了人的行为和内在的自卑情结的联系，深入诠释了接受自卑比克服自卑更加重要这一事实。</li>
<li>本书绝对不仅仅讲了自卑，也绝不是只有自认为自卑的人才需要阅读，本书通过自卑揭示了一些不为人知的心理学原理，而这些原理又是被广泛应用在社会生活中的，我强烈推荐所有对心理学感兴趣的朋友阅读此书！</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book1.jpg" alt="book1"></p>
<ul>
<li>《追求意义的意志》<ul>
<li>作者: [奥地利] 维克多·弗兰克尔</li>
<li>本书的作者维克多·弗兰克尔出生于奥地利，是美国著名的临床心理学家，获得维也纳大学医学博士和哲学博士学位。他亲历了二战，在希特勒占领奥地利后为了照顾年迈的父母，在获得美国签证的情况下没有逃离险境，而是坚持留在奥地利，最终被送进集中营。在集中营中，他亲眼见证了一个个生命的逝去，在巨大的痛苦和伤痛中不断思考生命的价值和意义，从痛苦、彷徨、抑郁甚至死亡的边缘寻找那一点点的亮光和希望。在那种情境下，生命只是囚服上的号码牌，没有人知道自己什么时候会被送进毒气室，生命的意义和存在的价值到底在哪里？恐怕只有像作者这样的亲历者才有资格回答这个问题。放眼望去，人类所经历的一切痛苦是否是值得的？作为一个个体，在社会中所经历的痛苦是否是值得的？思考这些问题可能会让你暂时感到恐惧和无助，但只有思考清楚了这些问题，我们才能从心底感到希望和快乐，真正明白活着是为了什么、我们现在的所有付出和努力是为了什么。</li>
<li>刚开始阅读本书时，我将书名误认为《追求意志的意义》，读了几章，发现不对劲，回头一看标题，方才豁然开朗，明白了作者的想表达的含义。</li>
<li>文本作者被称之为继弗洛伊德的心理分析、阿德勒的个体心理学之后的维也纳第三心理治疗学派。我强烈建议对心理学感兴趣的朋友们阅读此书。</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book2.jpg" alt="book2"></p>
<ul>
<li>《脆弱的力量》<ul>
<li>作者：[美] 布琳·布朗</li>
<li>本文作者是最受欢迎的5大TED演讲者、美国最具影响力女性之一的布琳·布朗，如果您没有时间阅读本书，建议直接观看作者同一主题的TED<a href="http://www.ted.com/talks/brene_brown_on_vulnerability" target="_blank" rel="external">演讲视频</a>。</li>
<li>本书从脆弱和羞耻感的角度研究了爱、归属感和人生，将脆弱和力量这两个看似矛盾的词汇完美的统一起来，让人们意识到脆弱的意义和价值所在，也让人们对不确定性和危机感不再恐惧。</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book3.jpg" alt="book3"></p>
<ul>
<li>《非暴力沟通》<ul>
<li>作者：[美] 马歇尔·卢森堡</li>
<li>本书是沟通领域的佳作，从心理学的角度描绘了人的观察和评论的不统一性、体会和表达的不统一性、事实和感受的不统一性。什么时候应该尊重事实？什么时候又应该尊重感受？作者给出了自己的回答。</li>
<li>倾听是解决沟通障碍的良药，怎样有效倾听对方的感受、最大程度地减少伤害？读完本书，您心中自然会有答案。</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book4.jpg" alt="book4"></p>
<ul>
<li>《钝感力》<ul>
<li>作者：[日] 渡边淳一 </li>
<li>本书送给像我一样对于他人的看法和感受比较敏感的朋友。</li>
<li>本书的作者是日本著名的医学家、小说家，曾获得医学博士学位。本文从医学的角度描绘了“钝感力”作为一种为人处世的态度及人生智慧，相比激进、张扬、刚硬而言，更易在目前竞争激烈、节奏飞快、错综复杂的现代社会中生存，也更易取得成功。</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book5.jpg" alt="book5"></p>
<ul>
<li>《亲爱的安德烈》<ul>
<li>作者：[中] 龙应台</li>
<li>《目送》、《孩子你慢慢来》、《亲爱的安德烈》是著名作家龙应台的亲情三部曲，其中我最喜欢这本《亲爱的安德烈》。</li>
<li>书中充分和细腻的描述了这位母亲在儿子长大后理性上和感性上的冲突，既希望儿子陪在身边、又希望儿子独立奋斗，既希望儿子理解自己、又怕自己已经和时代脱节。于是，母子俩用了三年时间互相通信，龙应台“认识了人生里第一个十八岁的人”，安德烈“也第一次认识了自己的母亲”。</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book6.jpg" alt="book6"></p>
<ul>
<li>《思想的星空》<ul>
<li>作者: [中] 周国平</li>
<li>本文作者周国平是中国社会科学院哲学研究所研究员，他的作品充满了人生的智慧和哲学的魅力，融理性和激情于一体，笔调清新自然，内涵睿智深刻，在这里同时推荐他的其他作品：《尼采美学文选》、《尼采诗集》、《偶像的黄昏》。</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book7.jpg" alt="book7"></p>
<ul>
<li>《幸福的方法》<ul>
<li>作者：[美] 泰勒·本·沙哈尔</li>
<li>本文作者泰勒·本·沙哈尔是哈佛大学心理学硕士、哲学和组织行为学博士，著名的《幸福课》就是他本人开创的。</li>
<li>本书用充满智慧的语言、科学实证的方法、自助成功的案例和巧妙创新的编排，让人们能够把积极心理学应用到日常生活之中。</li>
</ul>
</li>
</ul>
<p><img src="/images/2016books/book8.jpg" alt="book8"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/books/">books</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/feeling/">feeling</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-7-20-roll-linkedlist" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/20/2016-7-20-roll-linkedlist/" class="article-date">
  	<time datetime="2016-07-19T16:00:00.000Z" itemprop="datePublished">2016-07-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/20/2016-7-20-roll-linkedlist/">关于leetcode环形链表相关题目的总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>这几天，博主总结了一些leetcode的链表题目，本文参考了网上大牛的文章，结合自己的想法，总结了环形链表的解决方案，欢迎各位补充／批评指正。</li>
</ul>
<h3 id="建模">建模</h3><ul>
<li>链表头节点是X，环的第一个节点是Y;</li>
<li>slow和fast分别是指针，如果从链表头部开始往后移动，且fast指针移动速度为slow指针移动速度的两倍，设第一次的交点是Z；</li>
<li>各段的长度分别是a,b,c，如图所示；</li>
<li>环的长度是L；</li>
<li>slow和fast指针的向前移动速度分别是qs,qf；</li>
</ul>
<p><img src="/images/algorithm/roll.png" alt="roll"></p>
<h3 id="判断链表是否有环（leetcode_141）">判断链表是否有环（leetcode 141）</h3><ul>
<li>fast如果走到了null，证明没有环；</li>
<li>fast如果和slow相遇了，证明有环；</li>
<li>代码如下：</li>
</ul>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> singly-linked list.</span><br><span class="line"> * <span class="keyword">class</span> ListNode &#123;</span><br><span class="line"> *     <span class="built_in">int</span> val;</span><br><span class="line"> *     ListNode <span class="keyword">next</span>;</span><br><span class="line"> *     ListNode(<span class="built_in">int</span> x) &#123;</span><br><span class="line"> *         val = x;</span><br><span class="line"> *         <span class="keyword">next</span> = <span class="literal">null</span>;</span><br><span class="line"> *     &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="keyword">public</span> boolean hasCycle(ListNode head) &#123;</span><br><span class="line">        ListNode fast = head;</span><br><span class="line">        ListNode slow = head;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(fast!=<span class="literal">null</span>&amp;&amp;fast.<span class="keyword">next</span>!=<span class="literal">null</span>)&#123;</span><br><span class="line">            slow = slow.<span class="keyword">next</span>;</span><br><span class="line">            fast = fast.<span class="keyword">next</span>.<span class="keyword">next</span>;</span><br><span class="line">            <span class="keyword">if</span>(fast==slow)&#123;</span><br><span class="line">                return <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="环长度是多少">环长度是多少</h3><ul>
<li>方法一：在第一次相遇后，相当于slow和fast的距离是一个环的长度，继续让这两个指针以各自的速度去走，下一次相遇时，走过的节点数即为环的长度；</li>
<li>方法二：第一次相遇后，让fast停着不走了，slow继续走，记录到下次相遇时走过了几个节点，即为环的长度；</li>
<li>方法三：第一次相遇时slow走过的距离：<code>a+b</code>，fast走过的距离：<code>a+b+c+b</code>；因为fast的速度是slow的两倍，所以fast走的距离是slow的两倍，有 <code>2(a+b) = a+b+c+b</code>；可以得到<code>a=c</code>；最终我们得到<code>L=b+c=a+b</code>，也就是说，从一开始到二者第一次相遇，循环的次数就等于环的长度；</li>
</ul>
<h3 id="找到环中的第一个节点（leetcode_142）">找到环中的第一个节点（leetcode 142）</h3><ul>
<li>我们已经得到了结论a=c；</li>
<li>那么让两个指针分别从X和Z开始走，每次走一步，那么正好会在Y相遇，也就是环的第一个节点；</li>
<li>代码如下：</li>
</ul>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> singly-linked list.</span><br><span class="line"> * <span class="keyword">class</span> ListNode &#123;</span><br><span class="line"> *     <span class="built_in">int</span> val;</span><br><span class="line"> *     ListNode <span class="keyword">next</span>;</span><br><span class="line"> *     ListNode(<span class="built_in">int</span> x) &#123;</span><br><span class="line"> *         val = x;</span><br><span class="line"> *         <span class="keyword">next</span> = <span class="literal">null</span>;</span><br><span class="line"> *     &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode detectCycle(ListNode head) &#123;</span><br><span class="line">        ListNode fast = head;</span><br><span class="line">        ListNode slow = head;</span><br><span class="line">        <span class="keyword">while</span>(fast!=<span class="literal">null</span>&amp;&amp;fast.<span class="keyword">next</span>!=<span class="literal">null</span>)&#123;</span><br><span class="line">            slow = slow.<span class="keyword">next</span>;</span><br><span class="line">            fast = fast.<span class="keyword">next</span>.<span class="keyword">next</span>;</span><br><span class="line">            <span class="keyword">if</span>(slow==fast)&#123;</span><br><span class="line">                fast = head;</span><br><span class="line">                <span class="keyword">while</span>(fast!=slow)&#123;</span><br><span class="line">                    slow = slow.<span class="keyword">next</span>;</span><br><span class="line">                    fast = fast.<span class="keyword">next</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                return slow;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="如何将有环的链表变成单链表（解除环）">如何将有环的链表变成单链表（解除环）</h3><ul>
<li>在上一个问题的最后，将c段中Y点之前的那个节点与Y的链接切断即可；</li>
</ul>
<h3 id="如何判断两个单链表是否有交点，如何找到第一个相交的节点（leetcode_160）">如何判断两个单链表是否有交点，如何找到第一个相交的节点（leetcode 160）</h3><ul>
<li>先判断两个链表是否有环；</li>
<li>如果一个有环一个没环，肯定不相交；</li>
<li>如果两个都没有环，判断两个列表的尾部是否相等；</li>
<li>如果两个都有环，判断一个链表上的Z点是否在另一个链表上；</li>
<li>找到第一个相交的节点方法：<ul>
<li>求出两个链表的长度L1,L2（如果有环，则将Y点当做尾节点来算）;</li>
<li>假设L1&lt;L2，用两个指针分别从两个链表的头部开始走;</li>
<li>长度为L2的链表先走(L2-L1)步，然后两个一起走，直到二者相遇；</li>
</ul>
</li>
<li>代码如下：</li>
</ul>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> singly-linked list.</span><br><span class="line"> * <span class="keyword">public</span> <span class="keyword">class</span> ListNode &#123;</span><br><span class="line"> *     <span class="built_in">int</span> val;</span><br><span class="line"> *     ListNode <span class="keyword">next</span>;</span><br><span class="line"> *     ListNode(<span class="built_in">int</span> x) &#123;</span><br><span class="line"> *         val = x;</span><br><span class="line"> *         <span class="keyword">next</span> = <span class="literal">null</span>;</span><br><span class="line"> *     &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="keyword">public</span> static <span class="built_in">int</span> getLength(ListNode head)&#123;</span><br><span class="line">        ListNode point = head;</span><br><span class="line">        <span class="built_in">int</span> length = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(point!=<span class="literal">null</span>)&#123;</span><br><span class="line">            length++;</span><br><span class="line">            point = point.<span class="keyword">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return length;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> ListNode getIntersectionNode(ListNode headA, ListNode headB) &#123;</span><br><span class="line">        <span class="built_in">int</span> aLength = getLength(headA);</span><br><span class="line">        <span class="built_in">int</span> bLength = getLength(headB);</span><br><span class="line">        <span class="built_in">int</span> diff = Math.max(aLength,bLength)-Math.min(aLength,bLength);</span><br><span class="line">        </span><br><span class="line">        ListNode pointA = headA;</span><br><span class="line">        ListNode pointB = headB;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(diff&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(aLength&gt;bLength)&#123;</span><br><span class="line">                pointA = pointA.<span class="keyword">next</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(aLength&lt;bLength)&#123;</span><br><span class="line">                pointB = pointB.<span class="keyword">next</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            diff--;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(pointA!=pointB)&#123;</span><br><span class="line">            pointA = pointA.<span class="keyword">next</span>;</span><br><span class="line">            pointB = pointB.<span class="keyword">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        return pointA;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linkedlist/">Linkedlist</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-5-11-tree-traversal" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/11/2016-5-11-tree-traversal/" class="article-date">
  	<time datetime="2016-05-10T16:00:00.000Z" itemprop="datePublished">2016-05-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/11/2016-5-11-tree-traversal/">二叉树的遍历</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>本文展示了二叉树的前序遍历、中序遍历、后序遍历;</li>
<li>每种遍历均用递归和非递归的方法实现。</li>
<li>递归的方法明显比非递归的方法容易理解。</li>
<li>非递归的实现方式有很多种，本文给出了用一个栈实现的方法。</li>
</ul>
<h3 id="程序">程序</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">package test;</span><br><span class="line"></span><br><span class="line">import java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Test &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> TreeNode &#123;</span><br><span class="line">		<span class="keyword">int</span> val;</span><br><span class="line">		TreeNode left;</span><br><span class="line">		TreeNode right;</span><br><span class="line"></span><br><span class="line">		TreeNode(<span class="keyword">int</span> x) &#123;</span><br><span class="line">			val = x;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeNode <span class="title">BinaryTree</span><span class="params">(<span class="keyword">int</span>[] <span class="built_in">array</span>)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> makeBinaryTreeByArray(<span class="built_in">array</span>, <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeNode <span class="title">makeBinaryTreeByArray</span><span class="params">(<span class="keyword">int</span>[] <span class="built_in">array</span>, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (index &lt; <span class="built_in">array</span>.length) &#123;</span><br><span class="line">			<span class="keyword">int</span> value = <span class="built_in">array</span>[index];</span><br><span class="line">			<span class="keyword">if</span> (value != <span class="number">0</span>) &#123;</span><br><span class="line">				TreeNode t = <span class="keyword">new</span> TreeNode(value);</span><br><span class="line">				<span class="built_in">array</span>[index] = <span class="number">0</span>;</span><br><span class="line">				t.left = makeBinaryTreeByArray(<span class="built_in">array</span>, index * <span class="number">2</span>);</span><br><span class="line">				t.right = makeBinaryTreeByArray(<span class="built_in">array</span>, index * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">				<span class="keyword">return</span> t;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> null;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//前序遍历 递归实现</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preTraversal</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(root==null)&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.print(root.val+<span class="string">" "</span>);</span><br><span class="line">		preTraversal(root.left);</span><br><span class="line">		preTraversal(root.right);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//前序遍历 非递归实现(栈)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preTraversal1</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">		Stack&lt;TreeNode&gt; <span class="built_in">stack</span> = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">		<span class="keyword">if</span>(root==null)&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">stack</span>.push(root);</span><br><span class="line">		<span class="keyword">while</span>(!<span class="built_in">stack</span>.isEmpty())&#123;</span><br><span class="line">			TreeNode tmp = <span class="built_in">stack</span>.pop();</span><br><span class="line">			System.out.print(tmp.val+<span class="string">" "</span>);</span><br><span class="line">			<span class="keyword">if</span>(tmp.right!=null)&#123;</span><br><span class="line">				<span class="built_in">stack</span>.push(tmp.right);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(tmp.left!=null)&#123;</span><br><span class="line">				<span class="built_in">stack</span>.push(tmp.left);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//中序遍历 递归实现</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">midTraversal</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(root==null)&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(root.left!=null)&#123;</span><br><span class="line">			midTraversal(root.left);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.print(root.val+<span class="string">" "</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(root.right!=null)&#123;</span><br><span class="line">			midTraversal(root.right);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//中序遍历 非递归实现(栈)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">midTraversal1</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">		Stack&lt;TreeNode&gt; <span class="built_in">stack</span> = <span class="keyword">new</span> Stack&lt;&gt;();    </span><br><span class="line">		TreeNode node = root;    </span><br><span class="line">        <span class="keyword">while</span> (node != null || <span class="built_in">stack</span>.size() &gt; <span class="number">0</span>) &#123;    </span><br><span class="line">            <span class="keyword">while</span> (node != null) &#123;    </span><br><span class="line">                <span class="built_in">stack</span>.push(node);    </span><br><span class="line">                node = node.left;    </span><br><span class="line">            &#125;    </span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">stack</span>.size() &gt; <span class="number">0</span>) &#123;    </span><br><span class="line">                node = <span class="built_in">stack</span>.pop();    </span><br><span class="line">                System.out.print(node.val+<span class="string">" "</span>);  </span><br><span class="line">                node = node.right;    </span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;   </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//后序遍历 递归实现</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">behTraversal</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(root==null)&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(root.left!=null)&#123;</span><br><span class="line">			behTraversal(root.left);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(root.right!=null)&#123;</span><br><span class="line">			behTraversal(root.right);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.print(root.val+<span class="string">" "</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//后序遍历 非递归实现(栈)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">behTraversal1</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">		Stack&lt;TreeNode&gt; <span class="built_in">stack</span> = <span class="keyword">new</span> Stack&lt;TreeNode&gt;();    </span><br><span class="line">		TreeNode node = root, prev = root;    </span><br><span class="line">        <span class="keyword">while</span> (node != null || <span class="built_in">stack</span>.size() &gt; <span class="number">0</span>) &#123;    </span><br><span class="line">            <span class="keyword">while</span> (node != null) &#123;    </span><br><span class="line">                <span class="built_in">stack</span>.push(node);    </span><br><span class="line">                node = node.left;    </span><br><span class="line">            &#125;    </span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">stack</span>.size() &gt; <span class="number">0</span>) &#123;    </span><br><span class="line">            	TreeNode temp = <span class="built_in">stack</span>.peek().right;    </span><br><span class="line">                <span class="keyword">if</span> (temp == null || temp == prev) &#123;    </span><br><span class="line">                    node = <span class="built_in">stack</span>.pop();    </span><br><span class="line">                    System.out.print(node.val+<span class="string">" "</span>);    </span><br><span class="line">                    prev = node;    </span><br><span class="line">                    node = null;    </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;    </span><br><span class="line">                    node = temp;    </span><br><span class="line">                &#125;    </span><br><span class="line">            &#125;    </span><br><span class="line">        &#125; </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**  </span><br><span class="line">     *                  13 </span><br><span class="line">     *                 /  \ </span><br><span class="line">     *               65    5 </span><br><span class="line">     *              /  \    \ </span><br><span class="line">     *             97  25   37 </span><br><span class="line">     *            /    /\   / </span><br><span class="line">     *           22   4 28 32 </span><br><span class="line">     */</span>  </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span>[] arr = &#123; <span class="number">0</span>, <span class="number">13</span>, <span class="number">65</span>, <span class="number">5</span>, <span class="number">97</span>, <span class="number">25</span>, <span class="number">0</span>, <span class="number">37</span>, <span class="number">22</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">28</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">32</span>, <span class="number">0</span> &#125;;</span><br><span class="line">		TreeNode root = BinaryTree(arr);</span><br><span class="line">		preTraversal(root);  <span class="comment">//13 65 97 22 25 4 28 5 37 32</span></span><br><span class="line">		System.out.print(<span class="string">"\n"</span>);</span><br><span class="line">		preTraversal1(root);  <span class="comment">//13 65 97 22 25 4 28 5 37 32 </span></span><br><span class="line">		System.out.print(<span class="string">"\n"</span>);</span><br><span class="line">		midTraversal(root);  <span class="comment">//22 97 65 4 25 28 13 5 32 37 </span></span><br><span class="line">		System.out.print(<span class="string">"\n"</span>);</span><br><span class="line">		midTraversal1(root);  <span class="comment">//22 97 65 4 25 28 13 5 32 37 </span></span><br><span class="line">		System.out.print(<span class="string">"\n"</span>);</span><br><span class="line">		behTraversal(root);  <span class="comment">//22 97 4 28 25 65 32 37 5 13 </span></span><br><span class="line">		System.out.print(<span class="string">"\n"</span>);</span><br><span class="line">		behTraversal1(root);  <span class="comment">//22 97 4 28 25 65 32 37 5 13 </span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tree/">Tree</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-5-10-Leetcode-264" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/10/2016-5-10-Leetcode-264/" class="article-date">
  	<time datetime="2016-05-09T16:00:00.000Z" itemprop="datePublished">2016-05-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/10/2016-5-10-Leetcode-264/">对Leetcode 264题的一些思考</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>本文展示了我对于leetcode264题的思考，如有不正确之处，请各位大神多多指教。</li>
</ul>
<h3 id="题目">题目</h3><ul>
<li>Write a program to find the <code>n-th</code> ugly number.</li>
<li>Ugly numbers are positive numbers whose prime factors only include <code>2, 3, 5</code>. For example, <code>1, 2, 3, 4, 5, 6, 8, 9, 10, 12</code> is the sequence of the first 10 ugly numbers.</li>
<li>Note that <code>1</code> is typically treated as an ugly number.</li>
</ul>
<h3 id="解法">解法</h3><ul>
<li>思路：下一个丑数是上一个丑数乘以一个数（2 3 5），但是，这样算出来的丑数不一定是有序的，比如，上一个丑数是3，3*2=6也是丑数，但是比他小的4 5也是丑数，就被隔过去了。</li>
<li>所以如果能将上面的思路改写成一个有序的方法就好了。</li>
<li>在丑数的序列中，总能找到这样一个数，它乘2刚刚大于目前序列中最大的丑数，也总能找到这样一个数，它乘3刚刚大于目前序列中最大的丑数，也总能找到这样一个数，它乘4刚刚大于目前序列中最大的丑数，我们要找的“下一个丑数”即为上面三个数中最大的一个。</li>
<li>程序中，我们用m2、m3、m5三个下标，表示上述三个数在已经有序的丑数序列中的位置。</li>
<li>之所以每一循环，三个if均需检测，是因为如果遇到了某个丑数能够有多种方法分解（2 3 5）质因数，那么此时，m2、m3、m5三个下标可能需要同时移动，否则他们乘2（3或5）后就不是刚刚好大于目前序列中最大的丑数了。</li>
</ul>
<h3 id="程序">程序</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Solution &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">nthUglyNumber</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> m2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m3 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> m5 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span>[] uglyNumber = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">        uglyNumber[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(count&lt;n)&#123;</span><br><span class="line">            tmp = Math.min(uglyNumber[m2]*<span class="number">2</span>,Math.min(uglyNumber[m3]*<span class="number">3</span>,uglyNumber[m5]*<span class="number">5</span>));</span><br><span class="line">            <span class="keyword">if</span>(tmp==uglyNumber[m2]*<span class="number">2</span>) m2++;</span><br><span class="line">            <span class="keyword">if</span>(tmp==uglyNumber[m3]*<span class="number">3</span>) m3++;</span><br><span class="line">            <span class="keyword">if</span>(tmp==uglyNumber[m5]*<span class="number">5</span>) m5++;</span><br><span class="line">            uglyNumber[count] = tmp;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> uglyNumber[n-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-5-8-list-transfer" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/08/2016-5-8-list-transfer/" class="article-date">
  	<time datetime="2016-05-07T16:00:00.000Z" itemprop="datePublished">2016-05-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/08/2016-5-8-list-transfer/">链表的反转</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>本文展示了链表的反转的代码，用递归和非递归的方式实现。</li>
<li>详细的链表反转见leetcode 206的解法。</li>
</ul>
<h3 id="递归的实现">递归的实现</h3><figure class="highlight monkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span> ListNode reverseList(ListNode head) &#123;</span><br><span class="line">        <span class="keyword">if</span>(head==<span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;  </span><br><span class="line">        <span class="keyword">if</span>(head.<span class="keyword">next</span>==<span class="literal">null</span>) <span class="keyword">return</span> head;  </span><br><span class="line">          </span><br><span class="line">        ListNode p = head.<span class="keyword">next</span>;  </span><br><span class="line">        ListNode n = reverseList(p);  </span><br><span class="line">          </span><br><span class="line">        head.<span class="keyword">next</span> = <span class="literal">null</span>;  </span><br><span class="line">        p.<span class="keyword">next</span> = head;  </span><br><span class="line">        <span class="keyword">return</span> n;  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="非递归的实现">非递归的实现</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Definition for singly-linked list.</span><br><span class="line"> * public class ListNode &#123;</span><br><span class="line"> *     int val;</span><br><span class="line"> *     ListNode next;</span><br><span class="line"> *     ListNode(int x) &#123; val = x; &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode reverseList(ListNode head) &#123;</span><br><span class="line">        <span class="keyword">if</span>(head==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        ListNode point1 = head;</span><br><span class="line">        ListNode point2 = head.<span class="keyword">next</span>;</span><br><span class="line">        ListNode point3 = (point2==<span class="keyword">null</span>)?<span class="keyword">null</span>:point2.<span class="keyword">next</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(point2!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//System.out.println("----");</span></span><br><span class="line">            point3 = point2.<span class="keyword">next</span>;</span><br><span class="line">            point2.<span class="keyword">next</span> = point1;</span><br><span class="line">            point1 = point2;</span><br><span class="line">            point2 = point3;</span><br><span class="line">        &#125;</span><br><span class="line">        head.<span class="keyword">next</span>=<span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> point1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linkedlist/">Linkedlist</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-5-7-BFT-DFT" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/07/2016-5-7-BFT-DFT/" class="article-date">
  	<time datetime="2016-05-06T16:00:00.000Z" itemprop="datePublished">2016-05-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/07/2016-5-7-BFT-DFT/">树的广度优先遍历和深度优先遍历</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>本文介绍了树的广度优先和深度优先遍历，并给出程序。</li>
</ul>
<h3 id="原理">原理</h3><ul>
<li>广度优先遍历（BFT breadth-first traversal）：广度优先遍历是连通图的一种遍历策略，它的思想是从一个顶点V0开始，辐射状地优先遍历其周围较广的区域，故得名。树的广度优先遍历是指优先遍历完某一层的所有节点，然后再依次向下层遍历。</li>
<li>深度优先遍历（DFT depth-first traversal）：树的深度优先遍历是指首先遍历树的某个分支上的所有节点，在遍历另一个分支的节点，对于节点中的分支也这样处理。</li>
<li>广度优先和深度优先各有其侧重点，在不同的情境下可以选择使用。</li>
<li>本文不讨论广度优先和深度优先的适用场景，只给出两者的具体实现java代码，以供参考。</li>
</ul>
<h3 id="代码">代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">package test;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayDeque;</span><br><span class="line">import java.util.Queue;</span><br><span class="line">import java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Test &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//树的节点的定义</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> TreeNode &#123;</span><br><span class="line">		<span class="keyword">int</span> val;</span><br><span class="line">		TreeNode left;</span><br><span class="line">		TreeNode right;</span><br><span class="line"></span><br><span class="line">		TreeNode(<span class="keyword">int</span> x) &#123;</span><br><span class="line">			val = x;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//构建树</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeNode <span class="title">BinaryTree</span><span class="params">(<span class="keyword">int</span>[] <span class="built_in">array</span>)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> makeBinaryTreeByArray(<span class="built_in">array</span>, <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TreeNode <span class="title">makeBinaryTreeByArray</span><span class="params">(<span class="keyword">int</span>[] <span class="built_in">array</span>, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (index &lt; <span class="built_in">array</span>.length) &#123;</span><br><span class="line">			<span class="keyword">int</span> value = <span class="built_in">array</span>[index];</span><br><span class="line">			<span class="keyword">if</span> (value != <span class="number">0</span>) &#123;</span><br><span class="line">				TreeNode t = <span class="keyword">new</span> TreeNode(value);</span><br><span class="line">				<span class="built_in">array</span>[index] = <span class="number">0</span>;</span><br><span class="line">				t.left = makeBinaryTreeByArray(<span class="built_in">array</span>, index * <span class="number">2</span>);</span><br><span class="line">				t.right = makeBinaryTreeByArray(<span class="built_in">array</span>, index * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">				<span class="keyword">return</span> t;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> null;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">levelOrderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 用队列</span></span><br><span class="line">		<span class="keyword">if</span> (root == null) &#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		Queue&lt;TreeNode&gt; q1 = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">		q1.add(root);</span><br><span class="line">		<span class="keyword">while</span> (!q1.isEmpty()) &#123;</span><br><span class="line">			TreeNode tmp = q1.poll();</span><br><span class="line">			System.out.print(tmp.val+<span class="string">" "</span>);</span><br><span class="line">			<span class="keyword">if</span> (tmp.left != null) &#123;</span><br><span class="line">				q1.add(tmp.left);</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (tmp.right != null) &#123;</span><br><span class="line">				q1.add(tmp.right);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">depthOrderTraversal</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">		<span class="comment">// 用栈</span></span><br><span class="line">		<span class="keyword">if</span>(root==null)&#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		Stack&lt;TreeNode&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">		s.push(root);</span><br><span class="line">		<span class="keyword">while</span>(!s.isEmpty())&#123;</span><br><span class="line">			TreeNode tmp = s.pop();</span><br><span class="line">			System.out.print(tmp.val+<span class="string">" "</span>);</span><br><span class="line">			<span class="keyword">if</span>(tmp.right!=null)&#123;</span><br><span class="line">				s.push(tmp.right);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">if</span>(tmp.left!=null)&#123;</span><br><span class="line">				s.push(tmp.left);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/**  </span><br><span class="line">     *                  13 </span><br><span class="line">     *                 /  \ </span><br><span class="line">     *               65    5 </span><br><span class="line">     *              /  \    \ </span><br><span class="line">     *             97  25   37 </span><br><span class="line">     *            /    /\   / </span><br><span class="line">     *           22   4 28 32 </span><br><span class="line">     */</span>  </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span>[] arr = &#123;<span class="number">0</span>,<span class="number">13</span>,<span class="number">65</span>,<span class="number">5</span>,<span class="number">97</span>,<span class="number">25</span>,<span class="number">0</span>,<span class="number">37</span>,<span class="number">22</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">28</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">32</span>,<span class="number">0</span>&#125;;</span><br><span class="line">		TreeNode root = BinaryTree(arr);</span><br><span class="line">		levelOrderTraversal(root);  <span class="comment">//13 65 5 97 25 37 22 4 28 32 </span></span><br><span class="line">		System.out.print(<span class="string">"\n"</span>);</span><br><span class="line">		depthOrderTraversal(root);  <span class="comment">//13 65 97 22 25 4 28 5 37 32 </span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Algorithm/">Algorithm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tree/">Tree</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-5-6-database-design" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/06/2016-5-6-database-design/" class="article-date">
  	<time datetime="2016-05-05T16:00:00.000Z" itemprop="datePublished">2016-05-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/06/2016-5-6-database-design/">数据库设计原则</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>本文小结了数据设计原则；</li>
<li>数据库设计对于数据库的可维护性、可扩展性至关重要，某些原则必须严格遵守；</li>
</ul>
<h3 id="数据库设计范式">数据库设计范式</h3><ul>
<li>第一范式：属性具有原子性，不可再分解，即不能表中有表；</li>
<li>第二范式：唯一性约束，每条记录有唯一标示，所有的非主键字段均需依赖于主键字段；</li>
<li>第三范式：冗余性约束，非主键字段间不能相互依赖；</li>
</ul>
<h3 id="数据库设计原则">数据库设计原则</h3><ul>
<li>完整性：<ul>
<li><code>not null</code>声明禁止插入空值；</li>
<li><code>check</code>子句限制属性域；</li>
</ul>
</li>
<li>去冗余：<ul>
<li>避免冗余属性，冗余属性会带来数据不一致性；</li>
<li>学生选课系统中，老师可以开课、学生可以选课，数据库设计中，课程可以由课程编号和课程名称等确定；</li>
<li>如果现在维护两个表，一个表A存储课程信息（课程编号、名称、简介、学分、院系等），另一个表B存储开课信息（有哪些课程开课），如果B中重复存储了A的课程名称、简介、学分、院系等信息，一旦A中的信息更新，B中和A中信息便出现不一致；</li>
<li>正确的做法是，B中只存储课程编号，并以此和A相关联；</li>
</ul>
</li>
<li>解耦合：<ul>
<li>一个表只存储它应该存储的信息，和此表无关的信息放到另一个表去存储，表之间尽量解耦；</li>
<li>上面的例子中，A中存储且只存储面向课程的信息，另外有表C，存储且只存储面向学生的信息（学号、姓名、性别、年龄、选课id等），对于“课程级别”的信息，应当坚决的存储在A而不是C中，而且尽量避免将A、C合并成一个表（可能刚开始是设计成一个表），而且A、C间尽量解耦；</li>
</ul>
</li>
<li>字段不可再分：<ul>
<li>一个字段中不要出现分隔符，或者在一个字段中存储多个信息;</li>
<li>例如，first name和last name不要放在同一个字段中，稳定版本号和临时版本号不要放在同一个字段中；</li>
</ul>
</li>
<li>考虑性能：<ul>
<li>上述原则可能造成多表连接查询的情况出现，降低性能；</li>
<li>如果性能成为主要矛盾，则上述原则也不绝对；</li>
</ul>
</li>
</ul>
<h3 id="数据库命名原则">数据库命名原则</h3><ul>
<li>数据库的命名会直接影响到上层应用的名称，所以要和业务部门仔细讨论、慎重确定；</li>
<li>每个属性名在数据库中只有唯一的含义，number这个属性名可能表示电话号码或是房间号，这是一种容易引起歧义的命名；</li>
<li>数据库的名词要一致，不能在这个地方叫一个名字，到另外一个表又叫另外一个名字；</li>
<li>一般来说，Table命名用单数，Column命名用单数；</li>
<li>Table不用Prefix前缀来表示不同的组，而用schema来划分命名空间（postgresql中）；</li>
<li>命名用snake_case，不要有其他特殊字符；</li>
<li>名称中不要有<a href="http://www.postgresql.org/docs/9.3/static/sql-keywords-appendix.html" target="_blank" rel="external">sql关键字</a>；</li>
<li>如果确实需要使用sql关键字，可用双引号包围，比如<code>CREATE TABLE &quot;order&quot;(...)</code>；</li>
<li>主键的名字永远都是同一的，就是id，外键名称才需要加table的名字，诸如<code>xxx_id</code>、<code>yyy_id</code>；</li>
<li>命名不要用缩写，比如date缩写成dt；</li>
<li>用    <code>create_date/update_date/sample_date</code>这些含义更明确的名称代替date这个命名，这样不仅表达更准确，而且避免了用关键字的麻烦；</li>
<li>timestamp类型的字段要有timezone（时区），字段名用<code>xxx_date</code>的形式，仅表示年月日用<code>xxx_day</code>，仅表示时分秒用<code>xxx_time</code>；</li>
<li>表示数量、次数等概念的字段名称最好写为<code>xxx_count</code>，不要写为<code>xxx_number/xxx_num/xxx_no</code>等；</li>
<li>boolean类型的命名要用<code>is_xxx</code>格式；</li>
</ul>
<h3 id="数据库设计其他注意事项">数据库设计其他注意事项</h3><ul>
<li>每个表都要有主键，名称是id，类型为<code>bigint</code>；</li>
<li>主键的类型是设为integer还是long，取决于这个系统用多长时间，如果要用100年，主键还是设置为long类型较好，这样用的很久以后id也不会超出范围；</li>
<li>一个字段不要有多个用途，空间不是问题，清晰才是重点；</li>
<li>不要过早优化，先把东西做出来再说，遇到性能问题再去优化；</li>
<li>对于<code>varchar</code>类型的字段，当字符串并不是非常明确到底限制是多少的时候，通常选择255这个长度，<code>varchar(50)</code>并不比<code>varchar(255)</code>节省空间，<code>varchar(50)</code>仅仅是表示最多分配50个字符而已；</li>
<li><code>varchar(100)</code>类型在PostgreSQL中代表100个字符，而在Oracle中代表100字节，具体的占用空间数目和语言、编码方式有关；</li>
<li>对外键要加Index；</li>
<li>数据库里面的密码一定要加密，不能保存明文；</li>
<li>用<code>is_deleted=true</code>来表示本条记录的业务上的删除，不要在数据库中真正删除记录，或者仅仅是版本化修改，这样能防止数据丢失；</li>
</ul>
<h3 id="数据库性能提升方案">数据库性能提升方案</h3><ul>
<li>使用索引会大大提升查询效率，同时降低在被索引的表上INSERT和DELETE效率；</li>
<li>分离频繁和不频繁使用的数据到多个表中；<ul>
<li>例如，原先，一个表中保存用户名、密码、年龄、个人简介、学校等信息，但是发现访问用户名、密码、年龄的频率远高于其他字段，此时就应当将这个表分为两个表，分别存储频繁访问项和非频繁访问项；</li>
</ul>
</li>
</ul>
<h3 id="数据库安全策略">数据库安全策略</h3><ul>
<li>至少保存3个月的系统访问日志； </li>
<li>数据库中的表可以有创建和更新时间戳，及所创建/修改行的用户标示； </li>
<li>不删除字段，而是打上一个被删除的标记； </li>
<li>版本化修改；</li>
</ul>
<h3 id="大型数据库设计">大型数据库设计</h3><ul>
<li>负载均衡；</li>
<li>读写分离；</li>
<li>分布式存储；</li>
<li>参考<a href="http://www.cnblogs.com/ejiyuan/archive/2010/10/29/1796292.html" target="_blank" rel="external">这篇文章</a>；</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/datebase/">datebase</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/datebase/">datebase</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-5-2-database-search" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/02/2016-5-2-database-search/" class="article-date">
  	<time datetime="2016-05-01T16:00:00.000Z" itemprop="datePublished">2016-05-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/02/2016-5-2-database-search/">数据库查询优化方案小结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>本文小结了数据查询的优化方案；</li>
</ul>
<h3 id="查询耗时点">查询耗时点</h3><ul>
<li>解析SQL语句时间；</li>
<li>磁盘存取（查询所用CPU时间）；</li>
<li>磁盘IO；</li>
<li>并行/分布式数据库的网络通信时间；</li>
<li>其中，磁盘存取一般认为是耗时最多的点；</li>
</ul>
<h3 id="数据库层面的优化">数据库层面的优化</h3><ul>
<li>优化器设计（可将用户输入语句转换为等价的效率更高的执行语句）；</li>
<li>优化索引设计；</li>
<li>优化查询算法：<ul>
<li>在等价的查询语句中，选择读磁盘最少的那个；</li>
<li>对于简单的查询语句，可通过线性扫描和搜索引擎处理；</li>
<li>对于复杂的查询，将它转换为简单查询的并和交；</li>
<li>用外部归并排序算法对大于内存的关系进行排序；</li>
</ul>
</li>
</ul>
<h3 id="用户层面的优化">用户层面的优化</h3><ul>
<li>避免出现SELECT * FROM table 语句，要明确查出的字段；</li>
<li>在一个SQL语句中，如果一个where条件过滤的数据库记录越多，定位越准确，则该where条件越应该前移；</li>
<li>使用内层限定原则，在拼写SQL语句时，将查询条件分解、分类，并尽量在SQL语句的最里层进行限定，以减少数据的处理量；</li>
<li>在判断有无符合条件的记录时建议不要用SELECT COUNT （*）和select top 1 语句；</li>
<li>小心使用 IN 和 OR，需要注意In集合中的数据量，建议集合中的数据不超过200个；</li>
<li>应绝对避免在order by子句中使用表达式；</li>
<li><code>&lt;&gt;</code> 用 <code>&lt;</code> 、 <code>&gt;</code> 代替，<code>&gt;</code>用<code>&gt;=</code>代替，<code>&lt;</code>用<code>&lt;=</code>代替，这样可以有效的利用索引；</li>
<li>如果需要从关联表读数据，关联的表一般不要超过7个；</li>
<li>在一个事务中，对同一个表的多个insert语句应该集中在一起执行；</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/datebase/">datebase</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/datebase/">datebase</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-5-1-database-transaction" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/01/2016-5-1-database-transaction/" class="article-date">
  	<time datetime="2016-04-30T16:00:00.000Z" itemprop="datePublished">2016-05-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/01/2016-5-1-database-transaction/">数据库事务</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>事务是数据库的重要概念；</li>
<li>事务处理是数据库的核心机制之一；</li>
<li>本文总结数据库事务的相关概念；</li>
<li>事务的概念可参考<a href="http://mp.weixin.qq.com/s?__biz=MzA5ODM5MDU3MA==&amp;mid=2650861576&amp;idx=1&amp;sn=939459b313ef2e709840f98de0c4221f&amp;scene=0#wechat_redirect" target="_blank" rel="external">这篇文章</a></li>
</ul>
<h3 id="事务的性质">事务的性质</h3><ul>
<li>事务是数据库并发控制的基本单元；</li>
<li>事务是一个操作序列，不可分割，要么都执行，要么都不执行；</li>
<li>事务开始前和结束后，数据库中的数据应当保持一致性；</li>
<li>对数据库修改的多个事务彼此隔离，每个事务不应当影响或依赖其他事务；</li>
</ul>
<h3 id="数据库事务的四个特性及含义">数据库事务的四个特性及含义</h3><table>
<thead>
<tr>
<th>性质</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>原子性（atomicity）</td>
<td>一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节；<br>事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样；<br>可以维护一个日志（或快照）记录事务执行前数据库的状态，如果事务执行失败，则回滚到事务执行前的状态；<br>转账时，不可能发生转出账户扣款了，转入账户未到账的情况；</td>
</tr>
<tr>
<td>一致性（consistency）</td>
<td>在事务开始之前和事务结束以后，数据库的完整性没有被破坏；<br>转账时，账户总金额不能多也不能少，保持一致性；</td>
</tr>
<tr>
<td>隔离性（isolation）</td>
<td>数据库允许多个并发事务同时对齐数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致；<br>事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable），下面详细讲了；</td>
</tr>
<tr>
<td>持久性（durability）</td>
<td>事务处理结束后，对数据的修改就是永久的，即便系统出现故障，即真正持久化到数据库中；</td>
</tr>
</tbody>
</table>
<h3 id="事务执行进度">事务执行进度</h3><ul>
<li>begin：开始执行事务；</li>
<li>aborted：事务执行一半终止了；</li>
<li>roll back：事务已经回滚；</li>
<li>commited：事务已提交，即执行成功，已经持久化到数据库中；</li>
</ul>
<h3 id="事务并发产生的问题">事务并发产生的问题</h3><ul>
<li>脏读：<ul>
<li>一个事务读取了另一个事务操作但未提交的数据；</li>
<li>事务T1更新了数据还未提交，这时事务T2来读取相同的数据，则T2读到的数据其实是错误的数据，即脏数据，如果T1回滚的话，T2读到的数据是不可靠的；</li>
<li>基于脏数据所作的操作是不可能正确的；</li>
</ul>
</li>
<li>丢失更新：<ul>
<li>事务T1读取了数据，并执行了一些操作，然后更新数据，事务T2也做相同的事，则T1和T2更新数据时可能会覆盖对方的更新，从而引起错误； </li>
<li>用排他锁解决；</li>
</ul>
</li>
<li>不可重复读：<ul>
<li>一个事务中的多个相同的查询返回了不同数据；</li>
<li>一个事务的两次读取中，读取相同的资源得到不同的值，当事务T2在事务T1的两次读取之间更新数据，则会发生此种错误（重点在修改）；</li>
<li>用共享锁解决；</li>
</ul>
</li>
<li>幻读：<ul>
<li>事务并发执行时，其中一个事务对另一个事务中操作的结果集的影响；</li>
<li>事务T1对一定范围内执行操作，T2对相同的范围内执行不兼容的操作，这时会发生幻读；</li>
<li>T1删除符合条件C1的所有数据，T2又插入了一些符合条件C1的数据，则在T1中再次查找符合条件C1的数据还是可以查到，这对T1来说好像是幻觉一样，这时的读取操作称为幻读（重点在新增或删除）；</li>
<li>用排它锁解决；</li>
</ul>
</li>
</ul>
<h3 id="事务隔离级别">事务隔离级别</h3><ul>
<li>下面是数据库事务从高到低的四个隔离级别；</li>
</ul>
<table>
<thead>
<tr>
<th>级别名称</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>可串行化（Serializable）</td>
<td>提供严格的事务隔离；<br>它要求事务序列化执行，事务只能一个接着一个地执行，不能并发执行;</td>
</tr>
<tr>
<td>可重复读（Repeatable Read）</td>
<td>事务T1读取一个数据块，另外，事务T2在事务T1未commit的情况下，试图写同样的数据块，此时，T2的写操作会被阻塞，直到T1commit后，写操作才被commit进入数据库；</td>
</tr>
<tr>
<td>已提交读（Read committed）</td>
<td>事务T1读取一个数据块，另外，事务T2在事务T1未commit的情况下，成功对同样的数据块进行写操作并commit，事务T1再读这个数据块时，结果和前一次不同；<br>即允许事务T1在两次读操作期间，其他事务对相同的数据块进行写操作；</td>
</tr>
<tr>
<td>未提交读（Read uncommitted）</td>
<td>事务T1在事务T2对于一个数据块的写操作未commit的情况下，可以读取T2修改后的结果；</td>
</tr>
</tbody>
</table>
<ul>
<li>数据库事务隔离级别分别存在的并发问题</li>
</ul>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>是否存在脏读</th>
<th>是否存在不可重复读</th>
<th>是否存在幻读</th>
</tr>
</thead>
<tbody>
<tr>
<td>Read uncommitted</td>
<td>存在</td>
<td>存在</td>
<td>存在</td>
</tr>
<tr>
<td>Read committed</td>
<td>不存在</td>
<td>存在</td>
<td>存在</td>
</tr>
<tr>
<td>Repeatable Read</td>
<td>不存在</td>
<td>不存在</td>
<td>存在</td>
</tr>
<tr>
<td>Serializable</td>
<td>不存在</td>
<td>不存在</td>
<td>不存在</td>
</tr>
</tbody>
</table>
<ul>
<li>以上所有的隔离级别都不允许脏写（一个数据项已经被另外一个尚未提交或中止的事务写入，则不允许对该数据项执行写操作）；</li>
<li>数据库隔离界别越高，并发性能越低；</li>
</ul>
<h3 id="事务并发的处理方法">事务并发的处理方法</h3><ul>
<li>共享锁（S锁）：<ul>
<li>获准共享锁的事务职能读取数据，不能修改数据；</li>
<li>如果事务T对数据A加上共享锁后，则其他事务只能对A再加共享锁，不能加排他锁；</li>
</ul>
</li>
<li>排他锁（X锁）：<ul>
<li>获准排他锁的事务既能读取数据，也能修改数据；</li>
<li>如果事务T对数据A加上排他锁后，则其他事务不能在对A加任何类型的封锁；</li>
</ul>
</li>
</ul>
<h3 id="死锁及其解决方法">死锁及其解决方法</h3><ul>
<li>死锁实例1：<ul>
<li>现有事务A和B；</li>
<li>A在b上拥有排它锁，B正在申请b上的共享锁，故B需要等待A释放b上的排它锁；</li>
<li>B在a上拥有共享锁，A正在申请a上的排它锁，故A需要等待B释放a上的共享锁；</li>
<li>A和B相互等待，形成死锁；</li>
</ul>
</li>
<li>死锁实例2：<ul>
<li>将数据库设置为可重复读的隔离级别；</li>
<li>事务A等待事务B执行完毕，以便commit对对象a的更改（B已经读取了a）；</li>
<li>事务B等待事务A执行完毕，以便commit对对象b的更改（A已经读取了b）；</li>
</ul>
</li>
<li>死锁的解决：<ul>
<li>必须有一个事务主动回滚；</li>
<li>回滚的事务自动释放了锁；</li>
<li>另一个未回滚的事务就可以继续向下执行；</li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/datebase/">datebase</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/datebase/">datebase</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
    <article id="post-2016-4-9-angularjs-directive" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/09/2016-4-9-angularjs-directive/" class="article-date">
  	<time datetime="2016-04-08T16:00:00.000Z" itemprop="datePublished">2016-04-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/09/2016-4-9-angularjs-directive/">Angularjs 指令详解</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="引言">引言</h3><ul>
<li>angularjs有许多内置指令，这些指令主要用于操纵DOM、指定路由、绑定事件处理器、执行数据绑定等等；</li>
<li>angularjs不仅有丰富的内置指令，而且可以自定义指令，实现自己需要的功能；</li>
<li>angularjs指令系统是angularjs最重要的一个知识点，在本文中加以总结，如有不完善之处请您指出；</li>
<li>非常感谢慕课网的大漠穷秋老师，本文的很多代码复制自大漠穷秋老师在慕课网angularjs课程的示例代码；</li>
</ul>
<h3 id="内置指令">内置指令</h3><ul>
<li>angularjs以ng开头的指令均为内置指令，详见<a href="https://docs.angularjs.org/api/ng/directive" target="_blank" rel="external">官方文档</a>、<a href="http://www.atove.com/Article/Details/8FA45E956F366F46D3F87D054C5BA787" target="_blank" rel="external">内置指令总结</a>；</li>
<li>所有内置指令如下：</li>
</ul>
<p><img src="/images/angularjs-directive/in-build-directive.png" alt="in-build-directive"></p>
<h3 id="编写指令">编写指令</h3><ul>
<li>最简单的指令模板如下：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span> <span class="attribute">ng-app</span>=<span class="value">"testApp"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">type</span>=<span class="value">"text/css"</span> <span class="attribute">href</span>=<span class="value">"lib/bootstrap-3.3.1/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"testCtrl"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">hello</span>&gt;</span><span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">hello</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"hello"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- directive:hello --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"lib/bootstrap-3.3.1/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"lib/angular-1.3.3/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"test.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js</span></span><br><span class="line"><span class="keyword">var</span> mod = angular.module(<span class="string">'testApp'</span>, []);</span><br><span class="line"></span><br><span class="line">mod.directive(<span class="string">'hello'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        restrict:<span class="string">'AEMC'</span>,</span><br><span class="line">        template:<span class="string">'&lt;div&gt;this is a directive test!&lt;/div&gt;'</span>,</span><br><span class="line">        replace:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>自定义指令参数</li>
</ul>
<p><img src="/images/angularjs-directive/directive-params.png" alt="directive-params"></p>
<ul>
<li>对自定义指令声明参数的说明：<ul>
<li>restrict：替换自定义元素类型，E（元素）、C（类）、A（属性）、M（注释）；</li>
<li>template：替换的模板，如<code>template: &lt;div&gt;this is a directive test.&lt;/div&gt;</code>;</li>
<li>templateURL: 替换的模板的URL，如<code>templateUrl: &#39;hello.html&#39;</code>;</li>
<li><code>replace:true</code>,将自定义标签的内容全部替换掉；</li>
<li><code>transclude:true</code>,自定义标签的内容不会被替换，而是被放置在template中的<code>&lt;div ng-transclude&gt;&lt;/div&gt;</code>中；</li>
<li><code>compile: function(){...}</code>,自定义compile函数，一般放置暴露给外部看的（比如其他directive）一些公共函数；</li>
<li><code>link: function(){...}</code>，自定义link函数，一般放置本directive中操纵DOM、添加事件监听器等的代码；</li>
<li>作用域问题：在上述代码中，四个被指令替换的DOM标签其实所在的是同一个作用域，这样做不太安全，如果需要将作用域分开，则在指令中添加<code>scope:{}</code>即可，下面会详细讲解；</li>
</ul>
</li>
</ul>
<h3 id="独立scope">独立scope</h3><ul>
<li>实现独立scope的方法是在指令中添加<code>scope:{}</code>即可；</li>
<li>代码如下，改动任意一个input标签的内容，其他的directive不受影响，即directive作用域独立：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"MyModule"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">hello</span>&gt;</span><span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">hello</span>&gt;</span><span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">hello</span>&gt;</span><span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">hello</span>&gt;</span><span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"IsolateScope.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IsolateScope.js</span></span><br><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'AE'</span>,</span><br><span class="line">        scope:&#123;&#125;,</span><br><span class="line">        template: <span class="string">'&lt;div&gt;&lt;input type="text" ng-model="userName"/&gt;&#123;&#123;userName&#125;&#125;&lt;/div&gt;'</span>,</span><br><span class="line">        replace: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="指令和controller的交互">指令和controller的交互</h3><ul>
<li>在link函数中完成简单的directive和controller的交互,下面程序实现了在link中添加事件监听器并调用controller的特定方法：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/ng-table.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">	</span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">"myApp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"myCtrl"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">hello</span>&gt;</span>滑动加载<span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/jquery-2.1.4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/ng-table.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"app.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="undefined"></span><br><span class="line"></span><br><span class="line">	</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="keyword">var</span> mod = angular.module(<span class="string">'myApp'</span>, []);</span><br><span class="line"></span><br><span class="line">mod.controller(<span class="string">"myCtrl"</span>,<span class="function"><span class="keyword">function</span><span class="params">(<span class="variable">$scope</span>)</span></span>&#123;</span><br><span class="line">	<span class="variable">$scope</span>.loadData = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">		console.log(<span class="string">"正在加载数据"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mod.directive(<span class="string">'hello'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        restrict:<span class="string">'AEMC'</span>,  </span><br><span class="line">        link: <span class="function"><span class="keyword">function</span><span class="params">(scope, element, attr)</span></span>&#123;</span><br><span class="line">        	element.bind(<span class="string">"mouseenter"</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">        		scope.loadData();</span><br><span class="line">        	&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>一个指令也可同时调用多个controller的函数：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/ng-table.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">	</span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>=<span class="value">"myApp"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"myCtrl"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">hello</span> <span class="attribute">howtoload</span>=<span class="value">"loadData()"</span>&gt;</span>滑动加载<span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"myCtrl2"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">hello</span> <span class="attribute">howtoload</span>=<span class="value">"loadData2()"</span>&gt;</span>滑动加载2<span class="tag">&lt;/<span class="title">hello</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/jquery-2.1.4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/ng-table.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"app.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="undefined"></span><br><span class="line"></span><br><span class="line">	</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//app.js</span><br><span class="line"></span><br><span class="line">var mod = angular.module(<span class="string">'myApp'</span>, []);</span><br><span class="line"></span><br><span class="line">mod.controller(<span class="string">"myCtrl"</span>,<span class="keyword">function</span>(<span class="variable">$scope</span>)&#123;</span><br><span class="line">	<span class="variable">$scope</span>.loadData = function()&#123;</span><br><span class="line">		console.log(<span class="string">"正在加载数据"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mod.controller(<span class="string">"myCtrl2"</span>,<span class="keyword">function</span>(<span class="variable">$scope</span>)&#123;</span><br><span class="line">	<span class="variable">$scope</span>.loadData2 = function()&#123;</span><br><span class="line">		console.log(<span class="string">"正在加载数据...2222"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mod.directive(<span class="string">'hello'</span>,<span class="keyword">function</span>()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">        restrict:<span class="string">'AEMC'</span>,  </span><br><span class="line">        link: function(scope, element, attrs)&#123;</span><br><span class="line">        	element.bind(<span class="string">"mouseenter"</span>,function(event)&#123;</span><br><span class="line">        		scope.<span class="variable">$apply</span>(attrs.howtoload); //一律小写，不用驼峰法则，没有括号()</span><br><span class="line">        	&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="指令间通信">指令间通信</h3><ul>
<li>指令间通信的方法是：<code>scope: {}</code>定义独立作用域，<code>controller</code>暴露方法给别的指令，<code>require</code>引用其他指令；</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"MyModule"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"Directive&amp;Directive.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"col-md-3"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">superman</span> <span class="attribute">strength</span>&gt;</span>动感超人---力量<span class="tag">&lt;/<span class="title">superman</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"col-md-3"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">superman</span> <span class="attribute">strength</span> <span class="attribute">speed</span>&gt;</span>动感超人2---力量+敏捷<span class="tag">&lt;/<span class="title">superman</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"col-md-3"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">superman</span> <span class="attribute">strength</span> <span class="attribute">speed</span> <span class="attribute">light</span>&gt;</span>动感超人3---力量+敏捷+发光<span class="tag">&lt;/<span class="title">superman</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Directive&amp;Directive.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.directive(<span class="string">"superman"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        scope: &#123;&#125;,</span><br><span class="line">        restrict: <span class="string">'AE'</span>,</span><br><span class="line">        controller: <span class="function"><span class="keyword">function</span><span class="params">(<span class="variable">$scope</span>)</span> </span>&#123;</span><br><span class="line">            <span class="variable">$scope</span>.abilities = [];</span><br><span class="line">            this.addStrength = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="variable">$scope</span>.abilities.push(<span class="string">"strength"</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">            this.addSpeed = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="variable">$scope</span>.abilities.push(<span class="string">"speed"</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">            this.addLight = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="variable">$scope</span>.abilities.push(<span class="string">"light"</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        link: <span class="function"><span class="keyword">function</span><span class="params">(scope, element, attrs)</span> </span>&#123;</span><br><span class="line">            element.addClass(<span class="string">'btn btn-primary'</span>);</span><br><span class="line">            element.bind(<span class="string">"mouseenter"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                console.log(scope.abilities);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myModule.directive(<span class="string">"strength"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="keyword">require</span>: <span class="string">'^superman'</span>,</span><br><span class="line">        link: <span class="function"><span class="keyword">function</span><span class="params">(scope, element, attrs, supermanCtrl)</span> </span>&#123;</span><br><span class="line">            supermanCtrl.addStrength();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myModule.directive(<span class="string">"speed"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="keyword">require</span>: <span class="string">'^superman'</span>,</span><br><span class="line">        link: <span class="function"><span class="keyword">function</span><span class="params">(scope, element, attrs, supermanCtrl)</span> </span>&#123;</span><br><span class="line">            supermanCtrl.addSpeed();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myModule.directive(<span class="string">"light"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="keyword">require</span>: <span class="string">'^superman'</span>,</span><br><span class="line">        link: <span class="function"><span class="keyword">function</span><span class="params">(scope, element, attrs, supermanCtrl)</span> </span>&#123;</span><br><span class="line">            supermanCtrl.addLight();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="scope绑定">scope绑定</h3><ul>
<li><code>@</code>绑定：将当前属性作为字符串传递，实现绑定；<ul>
<li>下面代码中，<code>flavor:&#39;@&#39;</code>实现的功能可以由注释掉的link函数代替；</li>
</ul>
</li>
</ul>
<figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="doctype">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"MyModule"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"MyCtrl"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">drink</span> <span class="attribute">flavor</span>=<span class="value">"</span></span></span><span class="expression">&#123;&#123;<span class="variable">ctrlFlavor</span>&#125;&#125;</span><span class="xml"><span class="tag"><span class="value">"</span>&gt;</span><span class="tag">&lt;/<span class="title">drink</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"ScopeAt.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>)&#123;</span><br><span class="line">	<span class="variable">$scope</span>.ctrlFlavor=<span class="string">"百威"</span>;</span><br><span class="line">&#125;])</span><br><span class="line">myModule.directive(<span class="string">"drink"</span>, <span class="keyword">function</span>() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">    	restrict:<span class="string">'AE'</span>,</span><br><span class="line">        scope:&#123;</span><br><span class="line">        	flavor:<span class="string">'@'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template:<span class="string">"&lt;div&gt;&#123;&#123;flavor&#125;&#125;&lt;/div&gt;"</span></span><br><span class="line">        // ,</span><br><span class="line">        // link:function(scope,element,attrs)&#123;</span><br><span class="line">        // 	scope.flavor=attrs.flavor;</span><br><span class="line">        // &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>=</code>实现与父scope的属性双向绑定</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"MyModule"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"MyCtrl"</span>&gt;</span></span><br><span class="line">			Ctrl:</span><br><span class="line">			<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span> <span class="attribute">ng-model</span>=<span class="value">"ctrlFlavor"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">			Directive:</span><br><span class="line">			<span class="tag">&lt;<span class="title">br</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">drink</span> <span class="attribute">flavor</span>=<span class="value">"ctrlFlavor"</span>&gt;</span><span class="tag">&lt;/<span class="title">drink</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"ScopeEqual.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>)&#123;</span><br><span class="line">	<span class="variable">$scope</span>.ctrlFlavor=<span class="string">"百威"</span>;</span><br><span class="line">&#125;])</span><br><span class="line">myModule.directive(<span class="string">"drink"</span>, <span class="keyword">function</span>() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">    	restrict:<span class="string">'AE'</span>,</span><br><span class="line">        scope:&#123;</span><br><span class="line">        	flavor:<span class="string">'='</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template:<span class="string">'&lt;input type="text" ng-model="flavor"/&gt;'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><code>&amp;</code>：传递一个父scope的函数，稍后调用</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"MyModule"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-controller</span>=<span class="value">"MyCtrl"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">greeting</span> <span class="attribute">greet</span>=<span class="value">"sayHello(name)"</span>&gt;</span><span class="tag">&lt;/<span class="title">greeting</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">greeting</span> <span class="attribute">greet</span>=<span class="value">"sayHello(name)"</span>&gt;</span><span class="tag">&lt;/<span class="title">greeting</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="title">greeting</span> <span class="attribute">greet</span>=<span class="value">"sayHello(name)"</span>&gt;</span><span class="tag">&lt;/<span class="title">greeting</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"ScopeAnd.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var myModule = angular.module(<span class="string">"MyModule"</span>, []);</span><br><span class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="keyword">function</span>(<span class="variable">$scope</span>)&#123;</span><br><span class="line">	<span class="variable">$scope</span>.sayHello=function(name)&#123;</span><br><span class="line">		alert(<span class="string">"Hello "</span>+name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;])</span><br><span class="line">myModule.directive(<span class="string">"greeting"</span>, <span class="keyword">function</span>() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">    	restrict:<span class="string">'AE'</span>,</span><br><span class="line">        scope:&#123;</span><br><span class="line">        	greet:<span class="string">'&amp;'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template:<span class="string">'&lt;input type="text" ng-model="userName" /&gt;&lt;br/&gt;'</span>+</span><br><span class="line">        		 <span class="string">'&lt;button class="btn btn-default" ng-click="greet(&#123;name:userName&#125;)"&gt;Greeting&lt;/button&gt;&lt;br/&gt;'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="angularjs_初始化过程">angularjs 初始化过程</h3><ul>
<li>理解angularjs的初始化过程有助于我们进一步理解link和compile函数；</li>
<li>初始化过程如下：<ul>
<li>ng-app寻找angular作用边界，在ng-app作用域范围内创建<code>$rootScope</code>，以后各层级的<code>$scope</code>均在<code>$rootScope</code>基础上创建，实现树形作用域结构；</li>
<li>解析module中的各种组件名称对应的回调函数的注册表，回调函数不被执行，注册表中的组件均可被用于依赖注入；</li>
<li>controller立即执行；</li>
<li>Compile：根据从服务器获取的或者dierective中的HTML模板编译HTML，对指定的模板进行转换，生成Linking函数，此时DOM是静态DOM；</li>
<li>Link：将Compile结果与Scope结合，产生动态视图，包括在元素上注册时间监听，即动态DOM；</li>
<li>对于同一个指定的多个实例(如<code>ng-repeat</code>)，compile只会执行一次，而link对于指令的每个实例都会执行一次； </li>
</ul>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angularjs/">Angularjs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
  
  <script>
  (function() {
    var cx = '017806109166577290598:caowtb3biqa';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>



</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Eric Chang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
	
	<a rel="license" href="http://creativecommons.org/licenses/by/3.0/cn/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/cn/88x31.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by/3.0/cn/">知识共享署名 3.0 中国大陆许可协议</a>进行许可。
	
	<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

  _st('install','1BK1VZMDEA-ktxiBz_9B');
</script>

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1258423514'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1258423514%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
          
	
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>